{"ast":null,"code":"import _objectSpread from\"C:/Users/kapoo/OneDrive/Desktop/Gods Health AI/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{useParams,Link}from'react-router-dom';import{motion}from'framer-motion';import axios from'axios';import{buildApiUrl,API_ENDPOINTS,isStaticMode}from'../config/api.js';import{ArrowLeft,Heart,Brain,Activity,Stethoscope,TrendingUp,Zap,Clock,AlertTriangle,CheckCircle,Info,Loader,Download,Share2,Droplets,HelpCircle,ChevronDown,User,Calendar,Thermometer,Scale,FileText,BarChart3}from'lucide-react';// Recharts components removed - using simpler card-based design\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PredictorDetail=()=>{var _predictor$fields3,_result$risk_factors,_result$recommendatio,_result$detailed_anal,_result$detailed_anal2,_result$detailed_anal3,_result$detailed_anal4;const{predictorId}=useParams();const[predictor,setPredictor]=useState(null);const[formData,setFormData]=useState({});const[isLoading,setIsLoading]=useState(false);const[isLoadingFields,setIsLoadingFields]=useState(true);const[result,setResult]=useState(null);const[error,setError]=useState(null);const[currentStep,setCurrentStep]=useState(0);const[backendFields,setBackendFields]=useState(null);const[formProgress,setFormProgress]=useState(0);const[fieldErrors,setFieldErrors]=useState({});const[isDownloadingPDF,setIsDownloadingPDF]=useState(false);// Field mapping for common conversions\n// Field mapping for different predictors - HeartDiseasePredictor uses 'sex', others use 'gender'\nconst getBackendFieldName=(fieldName,predictorType)=>{if(fieldName==='gender'&&predictorType==='heart_disease'){return'sex';}return fieldName;};// Get default example values for form fields\nconst getDefaultExampleValue=(fieldName,field)=>{// Common field examples\nconst examples={// Basic demographics\n'age':45,'gender':'Male','sex':'Male','weight':70,'height':175,'occupation':'Technology','maternal_age':28,'gestational_age':38,'multiple_pregnancy':'No',// Vital signs and measurements\n'systolic_bp':130,'diastolic_bp':85,'resting_bp':130,'blood_pressure':130,'cholesterol':220,'total_cholesterol':220,'hdl_cholesterol':45,'ldl_cholesterol':130,'triglycerides':180,'bmi':26.5,'max_hr':165,'heart_rate':75,'oldpeak':1.2,'glucose_level':95,'avg_glucose_level':110,'glucose_fasting':95,'waist_circumference':85,'hip_circumference':95,'body_fat_percentage':18,'muscle_mass':35,'metabolic_rate':1650,'temperature':98.6,'spo2':98,'respiratory_rate':16,'mean_bp':100,'specific_gravity':1.025,'meals_per_day':3,'fruit_vegetable_servings':5,'albumin':1,'sugar':0,// Medical history\n'hypertension':'No','heart_disease':'No','family_history':'Yes','family_history_diabetes':'No','family_history_heart_disease':'No','family_history_hypertension':'No','family_history_obesity':'No','family_history_respiratory':'No','diabetes':'No','kidney_disease':'No','liver_disease':'No','thyroid_disorder':'No','autoimmune_disease':'No','chronic_hypertension':'No','diabetes_pre_pregnancy':'No','insulin_level':15,'pregnancies':2,'skin_thickness':25,'diabetes_pedigree_function':0.5,'previous_cancer':'No','cancer_type':'None','hormonal_factors':'Normal','fasting_bs':'No','chronic_illness':'No','previous_complications':'No','fetal_growth_restriction':'No','mobility':'Normal','medications_weight_gain':'No','medication_statins':'No','mechanical_ventilation':'No','vasopressor_use':'No','admission_diagnosis':'None','comorbidities':'None',// Lifestyle factors\n'smoking_status':'Never Smoked','smoking_history':'Never','smoking':'No','smoking_years':0,'smoking_pack_years':0,'alcohol_consumption':'Light','alcohol_intake':'Light','physical_activity':'Moderate','physical_activity_level':'Moderate','activity_level':'Moderately Active','current_fitness_level':'Intermediate','exercise_frequency':'Moderate','exercise_duration':45,'sleep_hours':7,'sleep_quality':'Good','stress_level':3,'social_support':'Good','work_satisfaction':'Satisfied','substance_use':'None','diet_quality':'Good','dietary_restrictions':'None','nutrition_score':75,'caffeine_intake':'Moderate (3-4 cups)','water_intake':2.5,'sedentary_hours':6,'screen_time':4,'work_stress':'Moderate','financial_stress':'Low','relationship_stress':'Low','morning_alertness':'Alert','daytime_fatigue':'Sometimes','sleep_disorders':'No','shift_work':'No','environmental_factors':'Good','processed_food_frequency':'Sometimes','cooking_frequency':'Often','supplement_use':'No','screen_time_before_bed':'<30 min','sleep_environment':'Good','snoring':'No','sleep_medications':'No','sleep_problems':'No','work_stress_level':5,'work_hours_per_week':40,'job_satisfaction':'Satisfied','work_life_balance':'Good','emotional_exhaustion':'Sometimes','cynicism':'Rarely','personal_accomplishment':'High','physical_symptoms':'No','coping_strategies':'Exercise','support_system':'Good',// Clinical tests\n'chest_pain_type':'Typical angina','resting_ecg':'Normal','exercise_angina':'No','cognitive_score':28,'education_years':16,'symptoms_count':2,// Liver function tests\n'bilirubin':1.2,'alkaline_phosphotase':250,'alamine_aminotransferase':35,// Neurological assessments\n'tremor_score':2,'rigidity_score':1,'bradykinesia_score':1,'postural_instability':'No',// Blood work\n'white_blood_cells':8000,'hemoglobin':14.5,'hematocrit':42,'platelet_count':250000,'red_blood_cell_count':4.8,'mcv':88,'mch':30,'mchc':34,'ferritin':150,'iron':100,'transferrin_saturation':25,'vitamin_b12':400,'folate':12,// Thyroid function\n'tsh':2.5,'t3':120,'t4':8.5,'thyroid_antibodies':'Negative',// Cancer markers\n'original_cancer_stage':'Stage I','months_since_treatment':12,'complete_response':'Yes','elevated_tumor_markers':'No',// Sepsis indicators\n'lactate':1.5,'procalcitonin':0.5,'creatinine':1.0,'urea':25,'sodium':140,'potassium':4.0,'chloride':100,'co2':24,// Respiratory function\n'peak_flow':450,'fev1':3.2,'fvc':4.0,'oxygen_saturation':98,'chest_xray':'Normal','spirometry':'Normal',// Pregnancy related\n'parity':1,'gravidity':2,'previous_preterm':'No','previous_stillbirth':'No','cervical_length':35,'amniotic_fluid':'Normal','placental_position':'Normal',// Surgery related\n'surgery_type':'Elective','anesthesia_type':'General','surgery_duration':120,'blood_loss':200,'asa_score':2,// ICU related\n'apache_score':15,'sofa_score':6,'glasgow_coma_scale':15,'ventilator_days':0,'dialysis':'No','organ_failure_count':0,// Hospital readmission\n'length_of_stay':5,'discharge_disposition':'Home','number_diagnoses':3,'number_procedures':1,'number_medications':8,'emergency_admission':'No','num_diagnoses':3,'num_medications':8,// Additional missing fields\n'current_bmi':26.5,'physical_activity_hours':3,'daily_calories':2000,'neck_circumference':38,'loud_snoring':'No','daytime_sleepiness':'No','comorbidity_count':1,'fully_vaccinated':'Yes','symptoms_severity':'Mild','serum_iron':100,'heavy_menstrual_bleeding':'No','dietary_iron_adequate':'Yes','family_history_thyroid':'No','social_support_score':8,'recent_life_events':'No','sepsis':'No','emergency_surgery':'No',// Work and lifestyle\n'work_type':0,// Private\n'residence_type':1,// Urban\n'ever_married':1,// Yes\n'family_history_stroke':0,// No\n'environmental_exposure':'No','sodium_intake_mg':2800};// Return specific example if available\nif(examples[fieldName]!==undefined){return examples[fieldName];}// Fallback based on field type\nif(field.type==='number'){if(field.min!==undefined&&field.max!==undefined){return Math.round((field.min+field.max)/2);}return field.min||0;}else if(field.type==='select'&&field.options){return field.options[0];}else if(field.type==='checkbox'){return false;}return'';};// Convert backend field definitions to frontend form fields\nconst convertBackendFieldsToFormFields=backendInfo=>{const fields=[];Object.entries(backendInfo.required_fields).forEach(_ref=>{let[fieldName,fieldType]=_ref;const description=backendInfo.field_descriptions[fieldName]||'';let formField={name:fieldName,label:description.split('(')[0].trim()||fieldName.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase()),type:'text',required:true,description:description};// Determine field type and options based on field name and description\nif(fieldType==='int'||fieldType==='float'){formField.type='number';if(fieldType==='float'){formField.step=0.1;}}// Special handling for common fields\nif(fieldName==='gender'||fieldName==='sex'){formField=_objectSpread(_objectSpread({},formField),{},{name:'gender',// Always use 'gender' internally\nlabel:'Gender',type:'select',options:['Female','Male'],description:'Gender (0 = Female, 1 = Male)'});}else if(fieldName==='age'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:0,max:120,unit:'years'});}else if(fieldName==='maternal_age'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:15,max:50,unit:'years'});}else if(fieldName==='gestational_age'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:20,max:42,unit:'weeks'});}else if(fieldName==='systolic_bp'||fieldName==='resting_bp'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:80,max:200,unit:'mmHg'});}else if(fieldName==='diastolic_bp'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:50,max:120,unit:'mmHg'});}else if(fieldName==='cholesterol'||fieldName==='total_cholesterol'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:100,max:400,unit:'mg/dL'});}else if(fieldName==='bmi'){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:15,max:50,step:0.1,unit:'kg/mÂ²'});}else if(fieldName==='smoking_status'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Never smoked','Former smoker','Current smoker']});}else if(fieldName==='chest_pain_type'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Typical angina','Atypical angina','Non-anginal pain','Asymptomatic']});}else if(fieldName==='resting_ecg'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Normal','ST-T wave abnormality','Left ventricular hypertrophy']});}else if(fieldName==='work_type'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Private','Self-employed','Government','Never worked']});}else if(fieldName==='residence_type'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Urban','Rural']});}else if(fieldName==='gender'||fieldName==='sex'){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['Female','Male']});}else if(// Only apply Yes/No for fields that explicitly mention yes/no in description\ndescription.includes('1 = yes, 0 = no')||description.includes('1 = Yes, 0 = No')||description.includes('(1 = yes, 0 = no)')||description.includes('(1 = Yes, 0 = No)')||description&&description.toLowerCase().includes('yes')&&description.toLowerCase().includes('no')||// Specific boolean fields that should be Yes/No\nfieldType==='int'&&(fieldName==='hypertension'||fieldName==='diabetes'||fieldName==='heart_disease'||fieldName==='smoking'||fieldName.startsWith('family_history')||fieldName==='chronic_hypertension'||fieldName==='diabetes_pre_pregnancy'||fieldName==='multiple_pregnancy'||fieldName==='previous_complications'||fieldName==='previous_cancer'||fieldName==='ever_married'||fieldName==='fasting_bs'||fieldName==='exercise_angina')){formField=_objectSpread(_objectSpread({},formField),{},{type:'select',options:['No','Yes']});}else if(description.includes('0-')&&description.includes('scale')){const match=description.match(/0-(\\d+)/);if(match){formField=_objectSpread(_objectSpread({},formField),{},{type:'number',min:0,max:parseInt(match[1])});}}fields.push(formField);});return fields;};const predictorData=useMemo(()=>({}),[]);useEffect(()=>{const fetchPredictorFields=async()=>{if(!predictorId)return;setIsLoadingFields(true);setError(null);try{// Check if we're in static mode\nif(isStaticMode()){// Use hardcoded data for static mode\nif(predictorData[predictorId]){var _predictorData$predic,_predictorData$predic2;setPredictor(predictorData[predictorId]);const initialData={};predictorData[predictorId].fields.forEach(field=>{initialData[field.name]=getDefaultExampleValue(field.name,field);});setFormData(initialData);// Calculate initial form progress\nconst filledFields=Object.values(initialData).filter(val=>val!==''&&val!==null&&val!==undefined).length;setFormProgress(filledFields/(((_predictorData$predic=predictorData[predictorId])===null||_predictorData$predic===void 0?void 0:(_predictorData$predic2=_predictorData$predic.fields)===null||_predictorData$predic2===void 0?void 0:_predictorData$predic2.length)||1)*100);}else{throw new Error('Predictor not found in static mode');}}else{// Fetch field definitions from backend\nconst response=await fetch(buildApiUrl(API_ENDPOINTS.PREDICTOR_FIELDS(predictorId)));if(!response.ok){throw new Error(\"Failed to fetch predictor fields: \".concat(response.statusText));}const backendInfo=await response.json();setBackendFields(backendInfo);// Convert backend fields to frontend form fields\nconst formFields=convertBackendFieldsToFormFields(backendInfo);// Create predictor info with dynamic fields\nconst predictorInfo={id:predictorId,name:backendInfo.name,description:backendInfo.description,category:'Health Assessment',icon:Heart,// Default icon\ndifficulty:'Medium',estimatedTime:'5-10 min',accuracy:'85%',fields:formFields};setPredictor(predictorInfo);// Initialize form data with example values\nconst initialData={};formFields.forEach(field=>{initialData[field.name]=getDefaultExampleValue(field.name,field);});setFormData(initialData);// Calculate initial form progress\nconst filledFields=Object.values(initialData).filter(val=>val!==''&&val!==null&&val!==undefined).length;setFormProgress(filledFields/((formFields===null||formFields===void 0?void 0:formFields.length)||1)*100);}}catch(err){console.error('Error fetching predictor fields:',err);setError(err instanceof Error?err.message:'Failed to load predictor');// Fallback to hardcoded data if available\nif(predictorData[predictorId]){var _predictorData$predic3,_predictorData$predic4;setPredictor(predictorData[predictorId]);const initialData={};predictorData[predictorId].fields.forEach(field=>{initialData[field.name]=getDefaultExampleValue(field.name,field);});setFormData(initialData);// Calculate initial form progress\nconst filledFields=Object.values(initialData).filter(val=>val!==''&&val!==null&&val!==undefined).length;setFormProgress(filledFields/(((_predictorData$predic3=predictorData[predictorId])===null||_predictorData$predic3===void 0?void 0:(_predictorData$predic4=_predictorData$predic3.fields)===null||_predictorData$predic4===void 0?void 0:_predictorData$predic4.length)||1)*100);}}finally{setIsLoadingFields(false);}};fetchPredictorFields();},[predictorId,predictorData]);const validateField=(field,value)=>{// Required field validation\nif(field.required&&(value===''||value===null||value===undefined)){return\"\".concat(field.label,\" is required\");}// Number field validation\nif(field.type==='number'&&value!==''&&value!==null&&value!==undefined){const numValue=parseFloat(value);if(isNaN(numValue)){return\"\".concat(field.label,\" must be a valid number\");}if(field.min!==undefined&&numValue<field.min){return\"\".concat(field.label,\" must be at least \").concat(field.min);}if(field.max!==undefined&&numValue>field.max){return\"\".concat(field.label,\" must be no more than \").concat(field.max);}}// Age-specific validation\nif(field.name==='age'&&value!==null&&value!==undefined&&value!==''){const age=parseFloat(value);if(!isNaN(age)&&(age<0||age>150)){return'Please enter a valid age between 0 and 150';}}// Blood pressure validation\nif((field.name.includes('bp')||field.name.includes('blood_pressure'))&&value!==null&&value!==undefined&&value!==''){const bp=parseFloat(value);if(!isNaN(bp)&&(bp<50||bp>300)){return'Please enter a realistic blood pressure value';}}return null;};const handleInputChange=(name,value)=>{var _predictor$fields;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Validate field in real-time\nconst field=predictor===null||predictor===void 0?void 0:predictor.fields.find(f=>f.name===name);if(field){const error=validateField(field,value);setFieldErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:error||''}));}// Update form progress\nconst filledFields=Object.values(_objectSpread(_objectSpread({},formData),{},{[name]:value})).filter(val=>val!==''&&val!==null&&val!==undefined).length;const totalFields=(predictor===null||predictor===void 0?void 0:(_predictor$fields=predictor.fields)===null||_predictor$fields===void 0?void 0:_predictor$fields.length)||1;setFormProgress(filledFields/totalFields*100);};// Helper function to get appropriate icon for field\nconst getFieldIcon=fieldName=>{const iconMap={age:/*#__PURE__*/_jsx(Calendar,{className:\"h-4 w-4 text-gray-500\"}),sex:/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 text-gray-500\"}),gender:/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 text-gray-500\"}),chest_pain_type:/*#__PURE__*/_jsx(Heart,{className:\"h-4 w-4 text-gray-500\"}),resting_bp:/*#__PURE__*/_jsx(Activity,{className:\"h-4 w-4 text-gray-500\"}),cholesterol:/*#__PURE__*/_jsx(Droplets,{className:\"h-4 w-4 text-gray-500\"}),fasting_bs:/*#__PURE__*/_jsx(Droplets,{className:\"h-4 w-4 text-gray-500\"}),resting_ecg:/*#__PURE__*/_jsx(Zap,{className:\"h-4 w-4 text-gray-500\"}),max_hr:/*#__PURE__*/_jsx(Heart,{className:\"h-4 w-4 text-gray-500\"}),exercise_angina:/*#__PURE__*/_jsx(Activity,{className:\"h-4 w-4 text-gray-500\"}),oldpeak:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-gray-500\"}),st_slope:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-gray-500\"}),bmi:/*#__PURE__*/_jsx(Scale,{className:\"h-4 w-4 text-gray-500\"}),temperature:/*#__PURE__*/_jsx(Thermometer,{className:\"h-4 w-4 text-gray-500\"}),blood_pressure:/*#__PURE__*/_jsx(Stethoscope,{className:\"h-4 w-4 text-gray-500\"}),mental_health:/*#__PURE__*/_jsx(Brain,{className:\"h-4 w-4 text-gray-500\"})};return iconMap[fieldName]||/*#__PURE__*/_jsx(Activity,{className:\"h-4 w-4 text-gray-500\"});};const handleSubmit=async e=>{var _predictor$fields2;e.preventDefault();if(!predictor||!backendFields)return;// Validate all fields before submission\nconst errors={};predictor===null||predictor===void 0?void 0:(_predictor$fields2=predictor.fields)===null||_predictor$fields2===void 0?void 0:_predictor$fields2.forEach(field=>{const value=formData[field.name];const error=validateField(field,value);if(error){errors[field.name]=error;}});setFieldErrors(errors);// Don't submit if there are validation errors\nif(Object.keys(errors).length>0){setError('Please fix the validation errors before submitting.');return;}setIsLoading(true);setError(null);try{var _env;// Convert form data to backend format\nconst backendData={};Object.entries(formData).forEach(_ref2=>{let[fieldName,value]=_ref2;// Map frontend field names to backend field names\nconst backendFieldName=getBackendFieldName(fieldName,predictor.id);const fieldType=backendFields.required_fields[backendFieldName];if(value===''||value===null||value===undefined){return;// Skip empty values\n}// Convert values based on backend field type\nif(fieldType==='int'){if(fieldName==='gender'||backendFieldName==='sex'||backendFieldName==='gender'){// Convert gender: Female = 0, Male = 1\nbackendData[backendFieldName]=value==='Male'||value===1?1:0;}else if(fieldName==='chest_pain_type'){// Convert chest pain type to numeric\nconst mapping={'Typical angina':0,'Atypical angina':1,'Non-anginal pain':2,'Asymptomatic':3};backendData[backendFieldName]=mapping[value]||0;}else if(fieldName==='resting_ecg'){// Convert ECG results to numeric\nconst mapping={'Normal':0,'ST-T wave abnormality':1,'Left ventricular hypertrophy':2};backendData[backendFieldName]=mapping[value]||0;}else if(fieldName==='smoking_status'){// Convert smoking status to numeric\nconst mapping={'Never smoked':0,'Former smoker':1,'Current smoker':2};backendData[backendFieldName]=mapping[value]||0;}else if(fieldName==='work_type'){// Convert work type to numeric\nconst mapping={'Private':0,'Self-employed':1,'Government':2,'Never worked':4};backendData[backendFieldName]=mapping[value]||0;}else if(fieldName==='residence_type'){// Convert residence type to numeric\nbackendData[backendFieldName]=value==='Urban'?1:0;}else if(typeof value==='string'&&(value==='Yes'||value==='No')){// Convert Yes/No to 1/0\nbackendData[backendFieldName]=value==='Yes'?1:0;}else{backendData[backendFieldName]=value!==null&&value!==undefined&&value!==''?parseInt(value.toString()):0;}}else if(fieldType==='float'){backendData[backendFieldName]=value!==null&&value!==undefined&&value!==''?parseFloat(value.toString()):0.0;}else{backendData[backendFieldName]=value;}});console.log('Sending data to backend:',backendData);// Check if we're in static mode (no backend)\nconst isStaticMode=((_env=import.meta.env)===null||_env===void 0?void 0:_env.REACT_APP_STATIC_MODE)==='true';if(isStaticMode){// Use mock data for static deployment\nawait new Promise(resolve=>setTimeout(resolve,1500));// Simulate API delay\nconst mockResult={risk_score:Math.random()*100,risk_level:['Low','Medium','High'][Math.floor(Math.random()*3)],confidence:85+Math.random()*10,recommendations:['Maintain a balanced diet rich in fruits and vegetables','Exercise regularly for at least 30 minutes daily','Monitor your health metrics regularly','Consult with healthcare professionals for personalized advice'],analysis:'This is a demonstration using mock data. In a real deployment with backend, you would receive personalized health predictions based on your input data.'};setResult({risk_level:mockResult.risk_level,risk_score:mockResult.risk_score,confidence:mockResult.confidence,recommendations:mockResult.recommendations,risk_factors:[],explanation:mockResult.analysis||''});setCurrentStep(1);}else{// Original API call logic for when backend is available\nconst response=await axios.post(buildApiUrl(API_ENDPOINTS.PREDICT),{predictor_type:predictor.id,data:backendData,include_analysis:true});setResult(response.data);setCurrentStep(1);}}catch(err){var _err$response,_err$response$data;console.error('Prediction error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'An error occurred while making the prediction.');}finally{setIsLoading(false);}};const getRiskColor=riskLevel=>{switch(riskLevel){case'Low':return'text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30';case'Medium':return'text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30';case'Moderate':return'text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30';case'High':return'text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/30';case'Very High':return'text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30';case'Critical':return'text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30';default:return'text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800';}};const getRiskIcon=riskLevel=>{switch(riskLevel){case'Low':return CheckCircle;case'Medium':return Info;case'Moderate':return Info;case'High':return AlertTriangle;case'Very High':return AlertTriangle;case'Critical':return AlertTriangle;default:return Info;}};const handleDownloadPDF=async()=>{if(!result||!predictor)return;// Check if we're in static mode (no backend)\nconst isStaticMode=import.meta.env.VITE_STATIC_MODE==='true';if(isStaticMode){// Show message that PDF download is not available in static mode\nsetError('PDF download is not available in static demo mode. This feature requires a backend server.');return;}setIsDownloadingPDF(true);try{const response=await fetch(buildApiUrl(API_ENDPOINTS.DOWNLOAD_REPORT),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prediction_data:{predictor_type:predictor.id,risk_score:result.risk_score,risk_level:result.risk_level,confidence:result.confidence,recommendations:result.recommendations},user_data:formData})});if(!response.ok){throw new Error('Failed to generate PDF report');}const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"\".concat(predictor.id,\"_health_report_\").concat(new Date().toISOString().split('T')[0],\".pdf\");document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('PDF download error:',error);setError('Failed to download PDF report. Please try again.');}finally{setIsDownloadingPDF(false);}};const renderField=field=>{var _field$options,_field$options2;// Use default value if formData is empty or undefined\nconst defaultValue=getDefaultExampleValue(field.name,field);const value=formData[field.name]!==undefined&&formData[field.name]!==''?formData[field.name]:defaultValue;const fieldError=fieldErrors[field.name];const hasError=!!fieldError;switch(field.type){case'number':const numValue=value!==null&&value!==undefined&&value!==''?parseFloat(value):field.min||0;const showSlider=field.min!==undefined&&field.max!==undefined&&field.max-field.min<=200;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[getFieldIcon(field.name),field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),field.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\",children:field.description})]})]}),showSlider?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",value:numValue,onChange:e=>handleInputChange(field.name,e.target.value!==''?parseFloat(e.target.value):field.min||0),min:field.min,max:field.max,step:field.step||1,className:\"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider\",style:{background:\"linear-gradient(to right, #3b82f6 0%, #3b82f6 \".concat((numValue-(field.min||0))/((field.max||100)-(field.min||0))*100,\"%, #e5e7eb \").concat((numValue-(field.min||0))/((field.max||100)-(field.min||0))*100,\"%, #e5e7eb 100%)\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-[80px] px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg text-sm font-medium text-blue-700 dark:text-blue-300 text-center\",children:[numValue,field.unit&&\" \".concat(field.unit)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[field.min,field.unit&&\" \".concat(field.unit)]}),/*#__PURE__*/_jsxs(\"span\",{children:[field.max,field.unit&&\" \".concat(field.unit)]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:numValue,onChange:e=>handleInputChange(field.name,e.target.value!==''?parseFloat(e.target.value):''),min:field.min,max:field.max,step:field.step||1,required:field.required,className:\"input pr-12 \".concat(hasError?'border-red-300 focus:border-red-500 focus:ring-red-500':'border-gray-300 focus:border-blue-500 focus:ring-blue-500',\" transition-colors duration-200\"),placeholder:\"Enter \".concat(field.label.toLowerCase())}),field.unit&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm font-medium\",children:field.unit}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-3 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-red-500\"})})]}),hasError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-3 w-3\"}),fieldError]}),field.min!==undefined&&field.max!==undefined&&!showSlider&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:[\"Range: \",field.min,\" - \",field.max,\" \",field.unit]})]},field.name);case'select':return/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[getFieldIcon(field.name),field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),field.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\",children:field.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:e=>handleInputChange(field.name,e.target.value),required:field.required,className:\"input appearance-none \".concat(hasError?'border-red-300 focus:border-red-500 focus:ring-red-500':'border-gray-300 focus:border-blue-500 focus:ring-blue-500',\" transition-colors duration-200\"),children:[/*#__PURE__*/_jsxs(\"option\",{value:\"\",children:[\"Select \",field.label]}),(_field$options=field.options)===null||_field$options===void 0?void 0:_field$options.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]}),/*#__PURE__*/_jsx(ChevronDown,{className:\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none\"}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-8 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-red-500\"})})]}),hasError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-3 w-3\"}),fieldError]})]},field.name);case'radio':return/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[getFieldIcon(field.name),field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),field.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\",children:field.description})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3\",children:(_field$options2=field.options)===null||_field$options2===void 0?void 0:_field$options2.map(option=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50 dark:hover:bg-gray-800 \".concat(value===option?'border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300':'border-gray-200 dark:border-gray-700'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:field.name,value:option,checked:value===option,onChange:e=>handleInputChange(field.name,e.target.value),required:field.required,className:\"mr-3 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:option})]},option))}),hasError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-2 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-3 w-3\"}),fieldError]})]},field.name);case'checkbox':return/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center h-5\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:value,onChange:e=>handleInputChange(field.name,e.target.checked),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[getFieldIcon(field.name),field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),field.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\",children:field.description})]})]}),hasError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-3 w-3\"}),fieldError]})]})]})},field.name);default:return/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[getFieldIcon(field.name),field.label,field.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 ml-1\",children:\"*\"})]}),field.description&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\",children:field.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:value,onChange:e=>handleInputChange(field.name,e.target.value),required:field.required,className:\"input \".concat(hasError?'border-red-300 focus:border-red-500 focus:ring-red-500':'border-gray-300 focus:border-blue-500 focus:ring-blue-500',\" transition-colors duration-200\"),placeholder:\"Enter \".concat(field.label.toLowerCase())}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-3 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-red-500\"})})]}),hasError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-600 mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-3 w-3\"}),fieldError]})]},field.name);}};if(isLoadingFields){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-white mb-2\",children:\"Loading Predictor...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Fetching field definitions from server\"})]})});}if(!predictor){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Predictor Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 mb-6\",children:\"The requested predictor could not be found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/predictors\",className:\"btn-primary\",children:\"Back to Predictors\"})]})});}const Icon=predictor.icon;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen py-8\",children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .slider::-webkit-slider-thumb {\\n          appearance: none;\\n          height: 20px;\\n          width: 20px;\\n          border-radius: 50%;\\n          background: #3b82f6;\\n          cursor: pointer;\\n          border: 2px solid #ffffff;\\n          box-shadow: 0 2px 4px rgba(0,0,0,0.2);\\n        }\\n        .slider::-moz-range-thumb {\\n          height: 20px;\\n          width: 20px;\\n          border-radius: 50%;\\n          background: #3b82f6;\\n          cursor: pointer;\\n          border: 2px solid #ffffff;\\n          box-shadow: 0 2px 4px rgba(0,0,0,0.2);\\n        }\\n        .slider:focus::-webkit-slider-thumb {\\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\\n        }\\n        .slider:focus::-moz-range-thumb {\\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\\n        }\\n      \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-max section-padding\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.8},className:\"mb-8\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/predictors\",className:\"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-6 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 mr-2\"}),\"Back to Predictors\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Icon,{className:\"h-8 w-8 text-primary-600 dark:text-primary-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl lg:text-4xl font-display font-bold text-gray-900 dark:text-white mb-2\",children:predictor.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600 dark:text-gray-300 mb-4\",children:predictor.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 mr-1\"}),predictor.estimatedTime]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-600 dark:text-green-400 font-medium\",children:[predictor.accuracy,\" accuracy\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full text-xs font-medium\",children:predictor.difficulty})]})]})]})]}),currentStep===0?/*#__PURE__*//* Form Step */_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.8,delay:0.2},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Health Assessment Form\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Please review and adjust the pre-filled values below to get your personalized health assessment.\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-600 dark:text-red-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-800 dark:text-red-300\",children:error})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-5 w-5 text-blue-600 dark:text-blue-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white\",children:\"Inputs\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6\",children:predictor===null||predictor===void 0?void 0:(_predictor$fields3=predictor.fields)===null||_predictor$fields3===void 0?void 0:_predictor$fields3.map(renderField)})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between pt-8 border-t border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-0\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2 text-green-500\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ready for assessment\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||formProgress<100||Object.values(fieldErrors).some(error=>error),className:\"btn-primary px-8 py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[160px] justify-center transition-all duration-200 hover:shadow-lg\",children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"animate-spin h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Analyzing...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Get Prediction\"})]})})]})]})]})}):/*#__PURE__*//* Results Step */_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.8},children:result&&/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Risk Assessment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleDownloadPDF,disabled:isDownloadingPDF,className:\"btn-outline p-2 relative\",title:\"Download PDF Report\",children:isDownloadingPDF?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full\"}):/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline p-2\",title:\"Share Report\",children:/*#__PURE__*/_jsx(Share2,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center px-4 py-2 rounded-full text-lg font-semibold \".concat(getRiskColor(result.risk_level)),children:[/*#__PURE__*/React.createElement(getRiskIcon(result.risk_level),{className:'h-5 w-5 mr-2'}),result.risk_level,\" Risk\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Risk Level\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:[Math.round(result.risk_score*100),\"%\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400 mt-2\",children:\"Risk Score\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:[Math.round(result.confidence*100),\"%\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400 mt-2\",children:\"Confidence\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 dark:text-white mb-2\",children:\"Explanation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300\",children:result.explanation})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-6 w-6 text-blue-600 dark:text-blue-400\"}),\"Input Values Used in Prediction\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 mb-4\",children:\"This prediction was generated using the following input values. These values represent your health profile and are used by our AI model to assess risk factors and generate personalized recommendations.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:Object.entries(formData).filter(_ref3=>{let[key,value]=_ref3;return value!==''&&value!==null&&value!==undefined;}).map(_ref4=>{var _predictor$fields4;let[key,value]=_ref4;const field=predictor===null||predictor===void 0?void 0:(_predictor$fields4=predictor.fields)===null||_predictor$fields4===void 0?void 0:_predictor$fields4.find(f=>f.name===key);const displayName=(field===null||field===void 0?void 0:field.label)||key.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());const unit=(field===null||field===void 0?void 0:field.unit)||'';return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 dark:text-white text-sm\",children:displayName}),(field===null||field===void 0?void 0:field.required)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200 px-2 py-1 rounded-full\",children:\"Required\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-blue-600 dark:text-blue-400\",children:typeof value==='boolean'?value?'Yes':'No':value}),unit&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:unit})]}),(field===null||field===void 0?void 0:field.description)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 dark:text-gray-400 mt-2\",children:field.description})]},key);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Info,{className:\"h-4 w-4\"}),\"How These Values Impact Your Prediction\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800 dark:text-blue-200\",children:\"Our AI model analyzes these input values using advanced machine learning algorithms trained on medical data. Each value contributes to the overall risk assessment, with some factors having higher impact than others. The model considers interactions between different health parameters to provide a comprehensive prediction.\"})]})]})]}),((_result$risk_factors=result.risk_factors)===null||_result$risk_factors===void 0?void 0:_result$risk_factors.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Key Risk Factors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:result.risk_factors.map((factor,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-orange-600 dark:text-orange-400 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-800 dark:text-orange-300\",children:factor})]},index))})]}),((_result$recommendatio=result.recommendations)===null||_result$recommendatio===void 0?void 0:_result$recommendatio.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Recommendations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:result.recommendations.map((recommendation,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800 dark:text-blue-300\",children:recommendation})]},index))})]}),((_result$detailed_anal=result.detailed_analysis)===null||_result$detailed_anal===void 0?void 0:_result$detailed_anal.contributing_factors)&&result.detailed_analysis.contributing_factors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Contributing Factors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:result.detailed_analysis.contributing_factors.map((factor,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-purple-600 dark:text-purple-400 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-800 dark:text-purple-300\",children:factor})]},index))})]}),((_result$detailed_anal2=result.detailed_analysis)===null||_result$detailed_anal2===void 0?void 0:_result$detailed_anal2.health_metrics)&&result.detailed_analysis.health_metrics.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Health Metrics Analysis\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:result.detailed_analysis.health_metrics.map((metric,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-green-900 dark:text-green-100\",children:metric.category}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(metric.status==='Normal'?'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100':metric.status==='Warning'?'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100':'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'),children:metric.status})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 dark:text-green-300 mb-2\",children:metric.value}),metric.recommendation&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-600 dark:text-green-400\",children:metric.recommendation})]},index))})]}),result.risk_score!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"h-6 w-6 text-purple-600 dark:text-purple-400\"}),\"Risk Assessment Overview\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center\",children:\"Overall Risk Level\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-40 h-40 mb-6\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-40 h-40 transform -rotate-90\",viewBox:\"0 0 144 144\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"72\",cy:\"72\",r:\"60\",stroke:\"currentColor\",strokeWidth:\"8\",fill:\"none\",className:\"text-gray-200 dark:text-gray-700\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"72\",cy:\"72\",r:\"60\",stroke:\"currentColor\",strokeWidth:\"8\",fill:\"none\",strokeDasharray:\"\".concat(2*Math.PI*60),strokeDashoffset:\"\".concat(2*Math.PI*60*(1-result.risk_score)),className:\"transition-all duration-1000 ease-out \".concat(result.risk_score<0.3?'text-green-500':result.risk_score<0.7?'text-yellow-500':'text-red-500'),strokeLinecap:\"round\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold \".concat(result.risk_score<0.3?'text-green-600 dark:text-green-400':result.risk_score<0.7?'text-yellow-600 dark:text-yellow-400':'text-red-600 dark:text-red-400'),children:[Math.round(result.risk_score*100),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600 dark:text-gray-400 font-medium\",children:\"Risk Score\"})]})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-4 py-2 rounded-full text-sm font-medium \".concat(result.risk_score<0.3?'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100':result.risk_score<0.7?'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100':'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'),children:result.risk_score<0.3?'Low Risk':result.risk_score<0.7?'Moderate Risk':'High Risk'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm text-gray-600 dark:text-gray-400 mt-3 max-w-xs\",children:result.risk_score<0.3?'Your risk level is low. Continue maintaining healthy habits.':result.risk_score<0.7?'Your risk level is moderate. Consider lifestyle improvements.':'Your risk level is high. Consult with healthcare professionals.'})]})]}),((_result$detailed_anal3=result.detailed_analysis)===null||_result$detailed_anal3===void 0?void 0:_result$detailed_anal3.contributing_factors)&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Key Contributing Factors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:result.detailed_analysis.contributing_factors.slice(0,5).map((factor,index)=>{// Assign different impact levels for visual variety\nconst impactLevels=[85,70,60,45,30];const impactLevel=impactLevels[index]||50;const colors=['bg-red-500','bg-orange-500','bg-yellow-500','bg-blue-500','bg-green-500'];const bgColors=['bg-red-50 dark:bg-red-900/20','bg-orange-50 dark:bg-orange-900/20','bg-yellow-50 dark:bg-yellow-900/20','bg-blue-50 dark:bg-blue-900/20','bg-green-50 dark:bg-green-900/20'];return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 \".concat(bgColors[index],\" rounded-lg border border-opacity-20\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:factor}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[impactLevel,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full \".concat(colors[index],\" transition-all duration-1000 ease-out\"),style:{width:\"\".concat(impactLevel,\"%\")}})})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-semibold text-gray-900 dark:text-white mb-3\",children:\"Impact Distribution\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-red-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"High Impact\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-yellow-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Moderate Impact\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-green-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Low Impact\"})]})]})]})]})]})]}),((_result$detailed_anal4=result.detailed_analysis)===null||_result$detailed_anal4===void 0?void 0:_result$detailed_anal4.lifestyle_impact)&&Object.keys(result.detailed_analysis.lifestyle_impact).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Activity,{className:\"h-6 w-6 text-indigo-600 dark:text-indigo-400\"}),\"Lifestyle Impact Analysis\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Lifestyle Impact Overview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:(()=>{// Filter and process lifestyle factors to show only meaningful ones\nconst meaningfulFactors=Object.entries(result.detailed_analysis.lifestyle_impact).filter(_ref5=>{let[key,value]=_ref5;return key!=='recommendations'&&value&&typeof value==='string'&&value.length>5&&// Filter out single letters\n!key.match(/^\\d+$/);// Filter out numeric keys\n}).slice(0,5);// Limit to top 5 factors\nif(meaningfulFactors.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No specific lifestyle factors identified\"})});}return meaningfulFactors.map((_ref6,index)=>{let[key,value]=_ref6;// Determine impact level from content\nlet impactLevel='Medium';let impactScore=60;if(typeof value==='string'){const lowerValue=value.toLowerCase();if(lowerValue.includes('low')||lowerValue.includes('minimal')||lowerValue.includes('good')){impactLevel='Low';impactScore=25;}else if(lowerValue.includes('high')||lowerValue.includes('significant')||lowerValue.includes('severe')||lowerValue.includes('poor')){impactLevel='High';impactScore=85;}}const getIcon=factorKey=>{const lowerKey=factorKey.toLowerCase();if(lowerKey.includes('smoking')||lowerKey.includes('tobacco'))return'ð­';if(lowerKey.includes('diet')||lowerKey.includes('nutrition')||lowerKey.includes('food'))return'ð¥';if(lowerKey.includes('exercise')||lowerKey.includes('activity')||lowerKey.includes('physical'))return'ð';if(lowerKey.includes('sleep'))return'ð´';if(lowerKey.includes('stress')||lowerKey.includes('mental'))return'ð°';if(lowerKey.includes('alcohol')||lowerKey.includes('drink'))return'ð·';if(lowerKey.includes('weight')||lowerKey.includes('bmi')||lowerKey.includes('obesity'))return'âï¸';if(lowerKey.includes('blood')||lowerKey.includes('pressure'))return'ð©¸';return'ð';};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:getIcon(key)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900 dark:text-white text-sm\",children:key.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase())}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full transition-all duration-500 \".concat(impactLevel==='Low'?'bg-green-500':impactLevel==='Medium'?'bg-yellow-500':'bg-red-500'),style:{width:\"\".concat(impactScore,\"%\")}})})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium ml-3 \".concat(impactLevel==='Low'?'bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-200':impactLevel==='Medium'?'bg-yellow-100 text-yellow-700 dark:bg-yellow-800 dark:text-yellow-200':'bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-200'),children:impactLevel})]},index);});})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Risk Distribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:(()=>{// Create a simple risk distribution visualization\nconst riskCategories=[{name:'Low Risk Factors',value:30,color:'bg-green-500',count:2},{name:'Moderate Risk Factors',value:45,color:'bg-yellow-500',count:3},{name:'High Risk Factors',value:25,color:'bg-red-500',count:1}];return riskCategories.map((category,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:category.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[category.count,\" factors\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-3 rounded-full \".concat(category.color,\" transition-all duration-700\"),style:{width:\"\".concat(category.value,\"%\")}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[category.value,\"%\"]})})]},index));})()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-6 border border-emerald-200 dark:border-emerald-700\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-emerald-900 dark:text-emerald-100 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5\"}),\"Key Health Recommendations\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:(()=>{// Generate relevant recommendations based on predictor type\nconst baseRecommendations=[\"Maintain a balanced diet rich in fruits and vegetables\",\"Engage in regular physical activity (150 minutes per week)\",\"Get adequate sleep (7-9 hours per night)\",\"Manage stress through relaxation techniques\"];// Use actual recommendations if available, otherwise use base ones\nconst recommendations=result.detailed_analysis.lifestyle_impact&&Array.isArray(result.detailed_analysis.lifestyle_impact)&&result.detailed_analysis.lifestyle_impact.length>0?result.detailed_analysis.lifestyle_impact.slice(0,4).map(item=>item.description||item.factor):baseRecommendations;return recommendations.map((recommendation,recIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 p-4 bg-white dark:bg-gray-800 rounded-lg border border-emerald-100 dark:border-emerald-800 hover:shadow-md transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 bg-emerald-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5 flex-shrink-0\",children:recIndex+1}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-emerald-700 dark:text-emerald-300 leading-relaxed\",children:recommendation})]},recIndex));})()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCurrentStep(0);setResult(null);setError(null);},className:\"btn-outline\",children:\"New Assessment\"}),/*#__PURE__*/_jsx(Link,{to:\"/predictors\",className:\"btn-primary\",children:\"Try Another Predictor\"})]})]})})]})]});};export default PredictorDetail;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useParams","Link","motion","axios","buildApiUrl","API_ENDPOINTS","isStaticMode","ArrowLeft","Heart","Brain","Activity","Stethoscope","TrendingUp","Zap","Clock","AlertTriangle","CheckCircle","Info","Loader","Download","Share2","Droplets","HelpCircle","ChevronDown","User","Calendar","Thermometer","Scale","FileText","BarChart3","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PredictorDetail","_predictor$fields3","_result$risk_factors","_result$recommendatio","_result$detailed_anal","_result$detailed_anal2","_result$detailed_anal3","_result$detailed_anal4","predictorId","predictor","setPredictor","formData","setFormData","isLoading","setIsLoading","isLoadingFields","setIsLoadingFields","result","setResult","error","setError","currentStep","setCurrentStep","backendFields","setBackendFields","formProgress","setFormProgress","fieldErrors","setFieldErrors","isDownloadingPDF","setIsDownloadingPDF","getBackendFieldName","fieldName","predictorType","getDefaultExampleValue","field","examples","undefined","type","min","max","Math","round","options","convertBackendFieldsToFormFields","backendInfo","fields","Object","entries","required_fields","forEach","_ref","fieldType","description","field_descriptions","formField","name","label","split","trim","replace","l","toUpperCase","required","step","_objectSpread","unit","includes","toLowerCase","startsWith","match","parseInt","push","predictorData","fetchPredictorFields","_predictorData$predic","_predictorData$predic2","initialData","filledFields","values","filter","val","length","Error","response","fetch","PREDICTOR_FIELDS","ok","concat","statusText","json","formFields","predictorInfo","id","category","icon","difficulty","estimatedTime","accuracy","err","console","message","_predictorData$predic3","_predictorData$predic4","validateField","value","numValue","parseFloat","isNaN","age","bp","handleInputChange","_predictor$fields","prev","find","f","totalFields","getFieldIcon","iconMap","className","sex","gender","chest_pain_type","resting_bp","cholesterol","fasting_bs","resting_ecg","max_hr","exercise_angina","oldpeak","st_slope","bmi","temperature","blood_pressure","mental_health","handleSubmit","e","_predictor$fields2","preventDefault","errors","keys","_env","backendData","_ref2","backendFieldName","mapping","toString","log","import","meta","env","REACT_APP_STATIC_MODE","Promise","resolve","setTimeout","mockResult","risk_score","random","risk_level","floor","confidence","recommendations","analysis","risk_factors","explanation","post","PREDICT","predictor_type","data","include_analysis","_err$response","_err$response$data","getRiskColor","riskLevel","getRiskIcon","handleDownloadPDF","VITE_STATIC_MODE","DOWNLOAD_REPORT","method","headers","body","JSON","stringify","prediction_data","user_data","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","Date","toISOString","appendChild","click","removeChild","revokeObjectURL","renderField","_field$options","_field$options2","defaultValue","fieldError","hasError","showSlider","children","onChange","target","style","background","placeholder","map","option","checked","to","Icon","div","initial","opacity","y","animate","transition","duration","delay","onSubmit","disabled","some","onClick","title","_ref3","key","_ref4","_predictor$fields4","displayName","factor","index","recommendation","detailed_analysis","contributing_factors","health_metrics","metric","status","viewBox","cx","cy","r","stroke","strokeWidth","fill","strokeDasharray","PI","strokeDashoffset","strokeLinecap","slice","impactLevels","impactLevel","colors","bgColors","width","lifestyle_impact","meaningfulFactors","_ref5","_ref6","impactScore","lowerValue","getIcon","factorKey","lowerKey","riskCategories","color","count","baseRecommendations","Array","isArray","item","recIndex"],"sources":["C:/Users/kapoo/OneDrive/Desktop/Gods Health AI/frontend/src/pages/PredictorDetail.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\nimport { buildApiUrl, API_ENDPOINTS, isStaticMode } from '../config/api.js';\nimport {\n  ArrowLeft,\n  Heart,\n  Brain,\n  Activity,\n  Stethoscope,\n  TrendingUp,\n  Zap,\n  Clock,\n  AlertTriangle,\n  CheckCircle,\n  Info,\n  Loader,\n  Download,\n  Share2,\n  Droplets,\n  HelpCircle,\n  ChevronDown,\n  User,\n  Calendar,\n  Thermometer,\n  Scale,\n  FileText,\n  BarChart3\n} from 'lucide-react';\n// Recharts components removed - using simpler card-based design\n\ninterface PredictorInfo {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  icon: React.ComponentType<any>;\n  difficulty: string;\n  estimatedTime: string;\n  accuracy: string;\n  fields: FormField[];\n}\n\ninterface FormField {\n  name: string;\n  label: string;\n  type: 'number' | 'select' | 'radio' | 'checkbox' | 'text';\n  required: boolean;\n  options?: string[];\n  min?: number;\n  max?: number;\n  step?: number;\n  unit?: string;\n  description?: string;\n}\n\ninterface BackendFieldInfo {\n  required_fields: Record<string, string>;\n  field_descriptions: Record<string, string>;\n  predictor_type: string;\n  name: string;\n  description: string;\n}\n\ninterface PredictionResult {\n  risk_level: 'Low' | 'Medium' | 'High' | 'Critical';\n  risk_score: number;\n  confidence: number;\n  recommendations: string[];\n  risk_factors: string[];\n  explanation: string;\n  detailed_analysis?: {\n    contributing_factors?: string[];\n    health_metrics?: {\n      category: string;\n      value: string;\n      status: string;\n      recommendation?: string;\n    }[];\n    lifestyle_impact?: {\n      factor: string;\n      impact_level: string;\n      description: string;\n      improvement_suggestions?: string[];\n    }[];\n  };\n}\n\nconst PredictorDetail: React.FC = () => {\n  const { predictorId } = useParams<{ predictorId: string }>();\n  const [predictor, setPredictor] = useState<PredictorInfo | null>(null);\n  const [formData, setFormData] = useState<Record<string, any>>({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLoadingFields, setIsLoadingFields] = useState(true);\n  const [result, setResult] = useState<PredictionResult | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [backendFields, setBackendFields] = useState<BackendFieldInfo | null>(null);\n  const [formProgress, setFormProgress] = useState(0);\n  const [fieldErrors, setFieldErrors] = useState<Record<string, string>>({});\n  const [isDownloadingPDF, setIsDownloadingPDF] = useState(false);\n\n  // Field mapping for common conversions\n  // Field mapping for different predictors - HeartDiseasePredictor uses 'sex', others use 'gender'\n  const getBackendFieldName = (fieldName: string, predictorType: string): string => {\n    if (fieldName === 'gender' && predictorType === 'heart_disease') {\n      return 'sex';\n    }\n    return fieldName;\n  };\n\n  // Get default example values for form fields\n  const getDefaultExampleValue = (fieldName: string, field: FormField): any => {\n    // Common field examples\n    const examples: Record<string, any> = {\n      // Basic demographics\n      'age': 45,\n      'gender': 'Male',\n      'sex': 'Male',\n      'weight': 70,\n      'height': 175,\n      'occupation': 'Technology',\n      'maternal_age': 28,\n      'gestational_age': 38,\n      'multiple_pregnancy': 'No',\n      \n      // Vital signs and measurements\n      'systolic_bp': 130,\n      'diastolic_bp': 85,\n      'resting_bp': 130,\n      'blood_pressure': 130,\n      'cholesterol': 220,\n      'total_cholesterol': 220,\n      'hdl_cholesterol': 45,\n      'ldl_cholesterol': 130,\n      'triglycerides': 180,\n      'bmi': 26.5,\n      'max_hr': 165,\n      'heart_rate': 75,\n      'oldpeak': 1.2,\n      'glucose_level': 95,\n      'avg_glucose_level': 110,\n      'glucose_fasting': 95,\n      'waist_circumference': 85,\n      'hip_circumference': 95,\n      'body_fat_percentage': 18,\n      'muscle_mass': 35,\n      'metabolic_rate': 1650,\n      'temperature': 98.6,\n      'spo2': 98,\n      'respiratory_rate': 16,\n      'mean_bp': 100,\n      'specific_gravity': 1.025,\n      'meals_per_day': 3,\n      'fruit_vegetable_servings': 5,\n      'albumin': 1,\n      'sugar': 0,\n      \n      // Medical history\n      'hypertension': 'No',\n      'heart_disease': 'No',\n      'family_history': 'Yes',\n      'family_history_diabetes': 'No',\n      'family_history_heart_disease': 'No',\n      'family_history_hypertension': 'No',\n      'family_history_obesity': 'No',\n      'family_history_respiratory': 'No',\n      'diabetes': 'No',\n      'kidney_disease': 'No',\n      'liver_disease': 'No',\n      'thyroid_disorder': 'No',\n      'autoimmune_disease': 'No',\n      'chronic_hypertension': 'No',\n      'diabetes_pre_pregnancy': 'No',\n      'insulin_level': 15,\n      'pregnancies': 2,\n      'skin_thickness': 25,\n      'diabetes_pedigree_function': 0.5,\n      'previous_cancer': 'No',\n      'cancer_type': 'None',\n      'hormonal_factors': 'Normal',\n      'fasting_bs': 'No',\n      'chronic_illness': 'No',\n      'previous_complications': 'No',\n      'fetal_growth_restriction': 'No',\n      'mobility': 'Normal',\n      'medications_weight_gain': 'No',\n      'medication_statins': 'No',\n      'mechanical_ventilation': 'No',\n      'vasopressor_use': 'No',\n      'admission_diagnosis': 'None',\n      'comorbidities': 'None',\n      \n      // Lifestyle factors\n      'smoking_status': 'Never Smoked',\n      'smoking_history': 'Never',\n      'smoking': 'No',\n      'smoking_years': 0,\n      'smoking_pack_years': 0,\n      'alcohol_consumption': 'Light',\n      'alcohol_intake': 'Light',\n      'physical_activity': 'Moderate',\n      'physical_activity_level': 'Moderate',\n      'activity_level': 'Moderately Active',\n      'current_fitness_level': 'Intermediate',\n      'exercise_frequency': 'Moderate',\n      'exercise_duration': 45,\n      'sleep_hours': 7,\n      'sleep_quality': 'Good',\n      'stress_level': 3,\n      'social_support': 'Good',\n      'work_satisfaction': 'Satisfied',\n      'substance_use': 'None',\n      'diet_quality': 'Good',\n      'dietary_restrictions': 'None',\n      'nutrition_score': 75,\n      'caffeine_intake': 'Moderate (3-4 cups)',\n      'water_intake': 2.5,\n      'sedentary_hours': 6,\n      'screen_time': 4,\n      'work_stress': 'Moderate',\n      'financial_stress': 'Low',\n      'relationship_stress': 'Low',\n      'morning_alertness': 'Alert',\n      'daytime_fatigue': 'Sometimes',\n      'sleep_disorders': 'No',\n      'shift_work': 'No',\n      'environmental_factors': 'Good',\n      'processed_food_frequency': 'Sometimes',\n      'cooking_frequency': 'Often',\n      'supplement_use': 'No',\n      'screen_time_before_bed': '<30 min',\n      'sleep_environment': 'Good',\n      'snoring': 'No',\n      'sleep_medications': 'No',\n      'sleep_problems': 'No',\n      'work_stress_level': 5,\n      'work_hours_per_week': 40,\n      'job_satisfaction': 'Satisfied',\n      'work_life_balance': 'Good',\n      'emotional_exhaustion': 'Sometimes',\n      'cynicism': 'Rarely',\n      'personal_accomplishment': 'High',\n      'physical_symptoms': 'No',\n      'coping_strategies': 'Exercise',\n      'support_system': 'Good',\n      \n      // Clinical tests\n      'chest_pain_type': 'Typical angina',\n      'resting_ecg': 'Normal',\n      'exercise_angina': 'No',\n      'cognitive_score': 28,\n      'education_years': 16,\n      'symptoms_count': 2,\n      \n      // Liver function tests\n      'bilirubin': 1.2,\n      'alkaline_phosphotase': 250,\n      'alamine_aminotransferase': 35,\n      \n      // Neurological assessments\n      'tremor_score': 2,\n      'rigidity_score': 1,\n      'bradykinesia_score': 1,\n      'postural_instability': 'No',\n      \n      // Blood work\n      'white_blood_cells': 8000,\n      'hemoglobin': 14.5,\n      'hematocrit': 42,\n      'platelet_count': 250000,\n      'red_blood_cell_count': 4.8,\n      'mcv': 88,\n      'mch': 30,\n      'mchc': 34,\n      'ferritin': 150,\n      'iron': 100,\n      'transferrin_saturation': 25,\n      'vitamin_b12': 400,\n      'folate': 12,\n      \n      // Thyroid function\n      'tsh': 2.5,\n      't3': 120,\n      't4': 8.5,\n      'thyroid_antibodies': 'Negative',\n      \n      // Cancer markers\n      'original_cancer_stage': 'Stage I',\n      'months_since_treatment': 12,\n      'complete_response': 'Yes',\n      'elevated_tumor_markers': 'No',\n      \n      // Sepsis indicators\n      'lactate': 1.5,\n      'procalcitonin': 0.5,\n      'creatinine': 1.0,\n      'urea': 25,\n      'sodium': 140,\n      'potassium': 4.0,\n      'chloride': 100,\n      'co2': 24,\n      \n      // Respiratory function\n      'peak_flow': 450,\n      'fev1': 3.2,\n      'fvc': 4.0,\n      'oxygen_saturation': 98,\n      'chest_xray': 'Normal',\n      'spirometry': 'Normal',\n      \n      // Pregnancy related\n      'parity': 1,\n      'gravidity': 2,\n      'previous_preterm': 'No',\n      'previous_stillbirth': 'No',\n      'cervical_length': 35,\n      'amniotic_fluid': 'Normal',\n      'placental_position': 'Normal',\n      \n      // Surgery related\n      'surgery_type': 'Elective',\n      'anesthesia_type': 'General',\n      'surgery_duration': 120,\n      'blood_loss': 200,\n      'asa_score': 2,\n      \n      // ICU related\n      'apache_score': 15,\n      'sofa_score': 6,\n      'glasgow_coma_scale': 15,\n      'ventilator_days': 0,\n      'dialysis': 'No',\n      'organ_failure_count': 0,\n      \n      // Hospital readmission\n      'length_of_stay': 5,\n      'discharge_disposition': 'Home',\n      'number_diagnoses': 3,\n      'number_procedures': 1,\n      'number_medications': 8,\n      'emergency_admission': 'No',\n      'num_diagnoses': 3,\n      'num_medications': 8,\n      \n      // Additional missing fields\n      'current_bmi': 26.5,\n      'physical_activity_hours': 3,\n      'daily_calories': 2000,\n      'neck_circumference': 38,\n      'loud_snoring': 'No',\n      'daytime_sleepiness': 'No',\n      'comorbidity_count': 1,\n      'fully_vaccinated': 'Yes',\n      'symptoms_severity': 'Mild',\n      'serum_iron': 100,\n      'heavy_menstrual_bleeding': 'No',\n      'dietary_iron_adequate': 'Yes',\n      'family_history_thyroid': 'No',\n      'social_support_score': 8,\n      'recent_life_events': 'No',\n      'sepsis': 'No',\n      'emergency_surgery': 'No',\n      \n      // Work and lifestyle\n      'work_type': 0, // Private\n      'residence_type': 1, // Urban\n      'ever_married': 1, // Yes\n      'family_history_stroke': 0, // No\n      'environmental_exposure': 'No',\n      'sodium_intake_mg': 2800\n    };\n    \n    // Return specific example if available\n    if (examples[fieldName] !== undefined) {\n      return examples[fieldName];\n    }\n    \n    // Fallback based on field type\n    if (field.type === 'number') {\n      if (field.min !== undefined && field.max !== undefined) {\n        return Math.round((field.min + field.max) / 2);\n      }\n      return field.min || 0;\n    } else if (field.type === 'select' && field.options) {\n      return field.options[0];\n    } else if (field.type === 'checkbox') {\n      return false;\n    }\n    \n    return '';\n  };\n\n  // Convert backend field definitions to frontend form fields\n  const convertBackendFieldsToFormFields = (backendInfo: BackendFieldInfo): FormField[] => {\n    const fields: FormField[] = [];\n    \n    Object.entries(backendInfo.required_fields).forEach(([fieldName, fieldType]) => {\n      const description = backendInfo.field_descriptions[fieldName] || '';\n      \n      let formField: FormField = {\n        name: fieldName,\n        label: description.split('(')[0].trim() || fieldName.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n        type: 'text',\n        required: true,\n        description: description\n      };\n\n      // Determine field type and options based on field name and description\n      if (fieldType === 'int' || fieldType === 'float') {\n        formField.type = 'number';\n        if (fieldType === 'float') {\n          formField.step = 0.1;\n        }\n      }\n\n      // Special handling for common fields\n      if (fieldName === 'gender' || fieldName === 'sex') {\n        formField = {\n          ...formField,\n          name: 'gender', // Always use 'gender' internally\n          label: 'Gender',\n          type: 'select',\n          options: ['Female', 'Male'],\n          description: 'Gender (0 = Female, 1 = Male)'\n        };\n      } else if (fieldName === 'age') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 0,\n          max: 120,\n          unit: 'years'\n        };\n      } else if (fieldName === 'maternal_age') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 15,\n          max: 50,\n          unit: 'years'\n        };\n      } else if (fieldName === 'gestational_age') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 20,\n          max: 42,\n          unit: 'weeks'\n        };\n      } else if (fieldName === 'systolic_bp' || fieldName === 'resting_bp') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 80,\n          max: 200,\n          unit: 'mmHg'\n        };\n      } else if (fieldName === 'diastolic_bp') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 50,\n          max: 120,\n          unit: 'mmHg'\n        };\n      } else if (fieldName === 'cholesterol' || fieldName === 'total_cholesterol') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 100,\n          max: 400,\n          unit: 'mg/dL'\n        };\n      } else if (fieldName === 'bmi') {\n        formField = {\n          ...formField,\n          type: 'number',\n          min: 15,\n          max: 50,\n          step: 0.1,\n          unit: 'kg/mÂ²'\n        };\n      } else if (fieldName === 'smoking_status') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Never smoked', 'Former smoker', 'Current smoker']\n        };\n      } else if (fieldName === 'chest_pain_type') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Typical angina', 'Atypical angina', 'Non-anginal pain', 'Asymptomatic']\n        };\n      } else if (fieldName === 'resting_ecg') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Normal', 'ST-T wave abnormality', 'Left ventricular hypertrophy']\n        };\n      } else if (fieldName === 'work_type') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Private', 'Self-employed', 'Government', 'Never worked']\n        };\n      } else if (fieldName === 'residence_type') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Urban', 'Rural']\n        };\n      } else if (fieldName === 'gender' || fieldName === 'sex') {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['Female', 'Male']\n        };\n      } else if (\n        // Only apply Yes/No for fields that explicitly mention yes/no in description\n        description.includes('1 = yes, 0 = no') ||\n        description.includes('1 = Yes, 0 = No') ||\n        description.includes('(1 = yes, 0 = no)') ||\n        description.includes('(1 = Yes, 0 = No)') ||\n        (description && description.toLowerCase().includes('yes') && description.toLowerCase().includes('no')) ||\n        // Specific boolean fields that should be Yes/No\n        (fieldType === 'int' && (\n          fieldName === 'hypertension' ||\n          fieldName === 'diabetes' ||\n          fieldName === 'heart_disease' ||\n          fieldName === 'smoking' ||\n          fieldName.startsWith('family_history') ||\n          fieldName === 'chronic_hypertension' ||\n          fieldName === 'diabetes_pre_pregnancy' ||\n          fieldName === 'multiple_pregnancy' ||\n          fieldName === 'previous_complications' ||\n          fieldName === 'previous_cancer' ||\n          fieldName === 'ever_married' ||\n          fieldName === 'fasting_bs' ||\n          fieldName === 'exercise_angina'\n        ))\n      ) {\n        formField = {\n          ...formField,\n          type: 'select',\n          options: ['No', 'Yes']\n        };\n      } else if (description.includes('0-') && description.includes('scale')) {\n        const match = description.match(/0-(\\d+)/);\n        if (match) {\n          formField = {\n            ...formField,\n            type: 'number',\n            min: 0,\n            max: parseInt(match[1])\n          };\n        }\n      }\n\n      fields.push(formField);\n    });\n\n    return fields;\n  };\n\n\n  const predictorData = useMemo(() => ({}), []);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  useEffect(() => {\n    const fetchPredictorFields = async () => {\n      if (!predictorId) return;\n      \n      setIsLoadingFields(true);\n      setError(null);\n      \n      try {\n        // Check if we're in static mode\n        if (isStaticMode()) {\n          // Use hardcoded data for static mode\n          if (predictorData[predictorId]) {\n            setPredictor(predictorData[predictorId]);\n            const initialData: Record<string, any> = {};\n            predictorData[predictorId].fields.forEach(field => {\n              initialData[field.name] = getDefaultExampleValue(field.name, field);\n            });\n            setFormData(initialData);\n            \n            // Calculate initial form progress\n            const filledFields = Object.values(initialData).filter(val => \n              val !== '' && val !== null && val !== undefined\n            ).length;\n            setFormProgress((filledFields / (predictorData[predictorId]?.fields?.length || 1)) * 100);\n          } else {\n            throw new Error('Predictor not found in static mode');\n          }\n        } else {\n          // Fetch field definitions from backend\n          const response = await fetch(buildApiUrl(API_ENDPOINTS.PREDICTOR_FIELDS(predictorId)));\n          if (!response.ok) {\n            throw new Error(`Failed to fetch predictor fields: ${response.statusText}`);\n          }\n          \n          const backendInfo: BackendFieldInfo = await response.json();\n          setBackendFields(backendInfo);\n          \n          // Convert backend fields to frontend form fields\n          const formFields = convertBackendFieldsToFormFields(backendInfo);\n          \n          // Create predictor info with dynamic fields\n          const predictorInfo: PredictorInfo = {\n            id: predictorId,\n            name: backendInfo.name,\n            description: backendInfo.description,\n            category: 'Health Assessment',\n            icon: Heart, // Default icon\n            difficulty: 'Medium',\n            estimatedTime: '5-10 min',\n            accuracy: '85%',\n            fields: formFields\n          };\n          \n          setPredictor(predictorInfo);\n          \n          // Initialize form data with example values\n          const initialData: Record<string, any> = {};\n          formFields.forEach(field => {\n            initialData[field.name] = getDefaultExampleValue(field.name, field);\n          });\n          setFormData(initialData);\n          \n          // Calculate initial form progress\n          const filledFields = Object.values(initialData).filter(val => \n            val !== '' && val !== null && val !== undefined\n          ).length;\n          setFormProgress((filledFields / (formFields?.length || 1)) * 100);\n        }\n        \n      } catch (err) {\n        console.error('Error fetching predictor fields:', err);\n        setError(err instanceof Error ? err.message : 'Failed to load predictor');\n        \n        // Fallback to hardcoded data if available\n        if (predictorData[predictorId]) {\n          setPredictor(predictorData[predictorId]);\n          const initialData: Record<string, any> = {};\n          predictorData[predictorId].fields.forEach(field => {\n            initialData[field.name] = getDefaultExampleValue(field.name, field);\n          });\n          setFormData(initialData);\n          \n          // Calculate initial form progress\n          const filledFields = Object.values(initialData).filter(val => \n            val !== '' && val !== null && val !== undefined\n          ).length;\n          setFormProgress((filledFields / (predictorData[predictorId]?.fields?.length || 1)) * 100);\n        }\n      } finally {\n        setIsLoadingFields(false);\n      }\n    };\n    \n    fetchPredictorFields();\n  }, [predictorId, predictorData]);\n\n  const validateField = (field: FormField, value: any): string | null => {\n    // Required field validation\n    if (field.required && (value === '' || value === null || value === undefined)) {\n      return `${field.label} is required`;\n    }\n\n    // Number field validation\n    if (field.type === 'number' && value !== '' && value !== null && value !== undefined) {\n      const numValue = parseFloat(value);\n      if (isNaN(numValue)) {\n        return `${field.label} must be a valid number`;\n      }\n      if (field.min !== undefined && numValue < field.min) {\n        return `${field.label} must be at least ${field.min}`;\n      }\n      if (field.max !== undefined && numValue > field.max) {\n        return `${field.label} must be no more than ${field.max}`;\n      }\n    }\n\n    // Age-specific validation\n    if (field.name === 'age' && (value !== null && value !== undefined && value !== '')) {\n      const age = parseFloat(value);\n      if (!isNaN(age) && (age < 0 || age > 150)) {\n        return 'Please enter a valid age between 0 and 150';\n      }\n    }\n\n    // Blood pressure validation\n    if ((field.name.includes('bp') || field.name.includes('blood_pressure')) && (value !== null && value !== undefined && value !== '')) {\n      const bp = parseFloat(value);\n      if (!isNaN(bp) && (bp < 50 || bp > 300)) {\n        return 'Please enter a realistic blood pressure value';\n      }\n    }\n\n    return null;\n  };\n\n  const handleInputChange = (name: string, value: any) => {\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Validate field in real-time\n    const field = predictor?.fields.find(f => f.name === name);\n    if (field) {\n      const error = validateField(field, value);\n      setFieldErrors(prev => ({\n        ...prev,\n        [name]: error || ''\n      }));\n    }\n    \n    // Update form progress\n    const filledFields = Object.values({ ...formData, [name]: value }).filter(val => \n      val !== '' && val !== null && val !== undefined\n    ).length;\n    const totalFields = predictor?.fields?.length || 1;\n    setFormProgress((filledFields / totalFields) * 100);\n  };\n\n  // Helper function to get appropriate icon for field\n  const getFieldIcon = (fieldName: string) => {\n    const iconMap: Record<string, React.ReactNode> = {\n      age: <Calendar className=\"h-4 w-4 text-gray-500\" />,\n      sex: <User className=\"h-4 w-4 text-gray-500\" />,\n      gender: <User className=\"h-4 w-4 text-gray-500\" />,\n      chest_pain_type: <Heart className=\"h-4 w-4 text-gray-500\" />,\n      resting_bp: <Activity className=\"h-4 w-4 text-gray-500\" />,\n      cholesterol: <Droplets className=\"h-4 w-4 text-gray-500\" />,\n      fasting_bs: <Droplets className=\"h-4 w-4 text-gray-500\" />,\n      resting_ecg: <Zap className=\"h-4 w-4 text-gray-500\" />,\n      max_hr: <Heart className=\"h-4 w-4 text-gray-500\" />,\n      exercise_angina: <Activity className=\"h-4 w-4 text-gray-500\" />,\n      oldpeak: <TrendingUp className=\"h-4 w-4 text-gray-500\" />,\n      st_slope: <TrendingUp className=\"h-4 w-4 text-gray-500\" />,\n      bmi: <Scale className=\"h-4 w-4 text-gray-500\" />,\n      temperature: <Thermometer className=\"h-4 w-4 text-gray-500\" />,\n      blood_pressure: <Stethoscope className=\"h-4 w-4 text-gray-500\" />,\n      mental_health: <Brain className=\"h-4 w-4 text-gray-500\" />\n    };\n    \n    return iconMap[fieldName] || <Activity className=\"h-4 w-4 text-gray-500\" />;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!predictor || !backendFields) return;\n\n    // Validate all fields before submission\n    const errors: Record<string, string> = {};\n    predictor?.fields?.forEach(field => {\n      const value = formData[field.name];\n      const error = validateField(field, value);\n      if (error) {\n        errors[field.name] = error;\n      }\n    });\n    \n    setFieldErrors(errors);\n    \n    // Don't submit if there are validation errors\n    if (Object.keys(errors).length > 0) {\n      setError('Please fix the validation errors before submitting.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Convert form data to backend format\n      const backendData: Record<string, any> = {};\n      \n      Object.entries(formData).forEach(([fieldName, value]) => {\n        // Map frontend field names to backend field names\n        const backendFieldName = getBackendFieldName(fieldName, predictor.id);\n        const fieldType = backendFields.required_fields[backendFieldName];\n        \n        if (value === '' || value === null || value === undefined) {\n          return; // Skip empty values\n        }\n        \n        // Convert values based on backend field type\n        if (fieldType === 'int') {\n          if (fieldName === 'gender' || backendFieldName === 'sex' || backendFieldName === 'gender') {\n            // Convert gender: Female = 0, Male = 1\n            backendData[backendFieldName] = value === 'Male' || value === 1 ? 1 : 0;\n          } else if (fieldName === 'chest_pain_type') {\n            // Convert chest pain type to numeric\n            const mapping = { 'Typical angina': 0, 'Atypical angina': 1, 'Non-anginal pain': 2, 'Asymptomatic': 3 };\n            backendData[backendFieldName] = mapping[value as string] || 0;\n          } else if (fieldName === 'resting_ecg') {\n            // Convert ECG results to numeric\n            const mapping = { 'Normal': 0, 'ST-T wave abnormality': 1, 'Left ventricular hypertrophy': 2 };\n            backendData[backendFieldName] = mapping[value as string] || 0;\n          } else if (fieldName === 'smoking_status') {\n            // Convert smoking status to numeric\n            const mapping = { 'Never smoked': 0, 'Former smoker': 1, 'Current smoker': 2 };\n            backendData[backendFieldName] = mapping[value as string] || 0;\n          } else if (fieldName === 'work_type') {\n            // Convert work type to numeric\n            const mapping = { 'Private': 0, 'Self-employed': 1, 'Government': 2, 'Never worked': 4 };\n            backendData[backendFieldName] = mapping[value as string] || 0;\n          } else if (fieldName === 'residence_type') {\n            // Convert residence type to numeric\n            backendData[backendFieldName] = value === 'Urban' ? 1 : 0;\n          } else if (typeof value === 'string' && (value === 'Yes' || value === 'No')) {\n            // Convert Yes/No to 1/0\n            backendData[backendFieldName] = value === 'Yes' ? 1 : 0;\n          } else {\n            backendData[backendFieldName] = value !== null && value !== undefined && value !== '' ? parseInt(value.toString()) : 0;\n          }\n        } else if (fieldType === 'float') {\n          backendData[backendFieldName] = value !== null && value !== undefined && value !== '' ? parseFloat(value.toString()) : 0.0;\n        } else {\n          backendData[backendFieldName] = value;\n        }\n      });\n\n      console.log('Sending data to backend:', backendData);\n\n      // Check if we're in static mode (no backend)\nconst isStaticMode = (import.meta as any).env?.REACT_APP_STATIC_MODE === 'true';\n      \n      if (isStaticMode) {\n        // Use mock data for static deployment\n        await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API delay\n        \n        const mockResult = {\n          risk_score: Math.random() * 100,\n          risk_level: ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)],\n          confidence: 85 + Math.random() * 10,\n          recommendations: [\n            'Maintain a balanced diet rich in fruits and vegetables',\n            'Exercise regularly for at least 30 minutes daily',\n            'Monitor your health metrics regularly',\n            'Consult with healthcare professionals for personalized advice'\n          ],\n          analysis: 'This is a demonstration using mock data. In a real deployment with backend, you would receive personalized health predictions based on your input data.'\n        };\n        \n        setResult({\n          risk_level: mockResult.risk_level as 'Low' | 'Medium' | 'High' | 'Critical',\n          risk_score: mockResult.risk_score,\n          confidence: mockResult.confidence,\n          recommendations: mockResult.recommendations,\n          risk_factors: [],\n          explanation: mockResult.analysis || ''\n        });\n        setCurrentStep(1);\n      } else {\n        // Original API call logic for when backend is available\n        const response = await axios.post(buildApiUrl(API_ENDPOINTS.PREDICT), {\n          predictor_type: predictor.id,\n          data: backendData,\n          include_analysis: true\n        });\n        setResult(response.data);\n        setCurrentStep(1);\n      }\n    } catch (err: any) {\n      console.error('Prediction error:', err);\n      setError(err.response?.data?.error || 'An error occurred while making the prediction.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getRiskColor = (riskLevel: string) => {\n    switch (riskLevel) {\n      case 'Low': return 'text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30';\n      case 'Medium': return 'text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30';\n      case 'Moderate': return 'text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30';\n      case 'High': return 'text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/30';\n      case 'Very High': return 'text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30';\n      case 'Critical': return 'text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30';\n      default: return 'text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800';\n    }\n  };\n\n  const getRiskIcon = (riskLevel: string) => {\n    switch (riskLevel) {\n      case 'Low': return CheckCircle;\n      case 'Medium': return Info;\n      case 'Moderate': return Info;\n      case 'High': return AlertTriangle;\n      case 'Very High': return AlertTriangle;\n      case 'Critical': return AlertTriangle;\n      default: return Info;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!result || !predictor) return;\n    \n    // Check if we're in static mode (no backend)\n    const isStaticMode = (import.meta as any).env.VITE_STATIC_MODE === 'true';\n    \n    if (isStaticMode) {\n      // Show message that PDF download is not available in static mode\n      setError('PDF download is not available in static demo mode. This feature requires a backend server.');\n      return;\n    }\n    \n    setIsDownloadingPDF(true);\n    try {\n      const response = await fetch(buildApiUrl(API_ENDPOINTS.DOWNLOAD_REPORT), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          prediction_data: {\n            predictor_type: predictor.id,\n            risk_score: result.risk_score,\n            risk_level: result.risk_level,\n            confidence: result.confidence,\n            recommendations: result.recommendations\n          },\n          user_data: formData\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to generate PDF report');\n      }\n      \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${predictor.id}_health_report_${new Date().toISOString().split('T')[0]}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('PDF download error:', error);\n      setError('Failed to download PDF report. Please try again.');\n    } finally {\n      setIsDownloadingPDF(false);\n    }\n  };\n\n  const renderField = (field: FormField) => {\n    // Use default value if formData is empty or undefined\n    const defaultValue = getDefaultExampleValue(field.name, field);\n    const value = formData[field.name] !== undefined && formData[field.name] !== '' ? formData[field.name] : defaultValue;\n    const fieldError = fieldErrors[field.name];\n    const hasError = !!fieldError;\n\n    switch (field.type) {\n      case 'number':\n        const numValue = (value !== null && value !== undefined && value !== '') ? parseFloat(value) : (field.min || 0);\n        const showSlider = field.min !== undefined && field.max !== undefined && (field.max - field.min) <= 200;\n        \n        return (\n          <div key={field.name} className=\"form-group\">\n            <label className=\"form-label flex items-center gap-2\">\n              <span className=\"flex items-center gap-1\">\n                {getFieldIcon(field.name)}\n                {field.label}\n                {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n              </span>\n              {field.description && (\n                <div className=\"relative group\">\n                  <HelpCircle className=\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\" />\n                  <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\n                    {field.description}\n                  </div>\n                </div>\n              )}\n            </label>\n            \n            {showSlider ? (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-4\">\n                  <input\n                    type=\"range\"\n                    value={numValue}\n                    onChange={(e) => handleInputChange(field.name, e.target.value !== '' ? parseFloat(e.target.value) : (field.min || 0))}\n                    min={field.min}\n                    max={field.max}\n                    step={field.step || 1}\n                    className=\"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider\"\n                    style={{\n                      background: `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${((numValue - (field.min || 0)) / ((field.max || 100) - (field.min || 0))) * 100}%, #e5e7eb ${((numValue - (field.min || 0)) / ((field.max || 100) - (field.min || 0))) * 100}%, #e5e7eb 100%)`\n                    }}\n                  />\n                  <div className=\"min-w-[80px] px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg text-sm font-medium text-blue-700 dark:text-blue-300 text-center\">\n                    {numValue}{field.unit && ` ${field.unit}`}\n                  </div>\n                </div>\n                <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400\">\n                  <span>{field.min}{field.unit && ` ${field.unit}`}</span>\n                  <span>{field.max}{field.unit && ` ${field.unit}`}</span>\n                </div>\n              </div>\n            ) : (\n              <div className=\"relative\">\n                <input\n                  type=\"number\"\n                  value={numValue}\n                  onChange={(e) => handleInputChange(field.name, e.target.value !== '' ? parseFloat(e.target.value) : '')}\n                  min={field.min}\n                  max={field.max}\n                  step={field.step || 1}\n                  required={field.required}\n                  className={`input pr-12 ${hasError ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-blue-500 focus:ring-blue-500'} transition-colors duration-200`}\n                  placeholder={`Enter ${field.label.toLowerCase()}`}\n                />\n                {field.unit && (\n                  <span className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm font-medium\">\n                    {field.unit}\n                  </span>\n                )}\n                {hasError && (\n                  <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                    <AlertTriangle className=\"h-4 w-4 text-red-500\" />\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {hasError && (\n              <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3\" />\n                {fieldError}\n              </p>\n            )}\n            {field.min !== undefined && field.max !== undefined && !showSlider && (\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                Range: {field.min} - {field.max} {field.unit}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'select':\n        return (\n          <div key={field.name} className=\"form-group\">\n            <label className=\"form-label flex items-center gap-2\">\n              <span className=\"flex items-center gap-1\">\n                {getFieldIcon(field.name)}\n                {field.label}\n                {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n              </span>\n              {field.description && (\n                <div className=\"relative group\">\n                  <HelpCircle className=\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\" />\n                  <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\n                    {field.description}\n                  </div>\n                </div>\n              )}\n            </label>\n            <div className=\"relative\">\n              <select\n                value={value}\n                onChange={(e) => handleInputChange(field.name, e.target.value)}\n                required={field.required}\n                className={`input appearance-none ${hasError ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-blue-500 focus:ring-blue-500'} transition-colors duration-200`}\n              >\n                <option value=\"\">Select {field.label}</option>\n                {field.options?.map(option => (\n                  <option key={option} value={option}>{option}</option>\n                ))}\n              </select>\n              <ChevronDown className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none\" />\n              {hasError && (\n                <div className=\"absolute right-8 top-1/2 transform -translate-y-1/2\">\n                  <AlertTriangle className=\"h-4 w-4 text-red-500\" />\n                </div>\n              )}\n            </div>\n            {hasError && (\n              <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3\" />\n                {fieldError}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'radio':\n        return (\n          <div key={field.name} className=\"form-group\">\n            <label className=\"form-label flex items-center gap-2 mb-3\">\n              <span className=\"flex items-center gap-1\">\n                {getFieldIcon(field.name)}\n                {field.label}\n                {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n              </span>\n              {field.description && (\n                <div className=\"relative group\">\n                  <HelpCircle className=\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\" />\n                  <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\n                    {field.description}\n                  </div>\n                </div>\n              )}\n            </label>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n              {field.options?.map(option => (\n                <label key={option} className={`flex items-center p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  value === option \n                    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300' \n                    : 'border-gray-200 dark:border-gray-700'\n                }`}>\n                  <input\n                    type=\"radio\"\n                    name={field.name}\n                    value={option}\n                    checked={value === option}\n                    onChange={(e) => handleInputChange(field.name, e.target.value)}\n                    required={field.required}\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"font-medium\">{option}</span>\n                </label>\n              ))}\n            </div>\n            {hasError && (\n              <p className=\"text-sm text-red-600 mt-2 flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3\" />\n                {fieldError}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'checkbox':\n        return (\n          <div key={field.name} className=\"form-group\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex items-center h-5\">\n                <input\n                  type=\"checkbox\"\n                  checked={value}\n                  onChange={(e) => handleInputChange(field.name, e.target.checked)}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200\"\n                />\n              </div>\n              <div className=\"flex-1\">\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <span className=\"flex items-center gap-1\">\n                    {getFieldIcon(field.name)}\n                    {field.label}\n                    {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n                  </span>\n                  {field.description && (\n                    <div className=\"relative group\">\n                      <HelpCircle className=\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\" />\n                      <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\n                        {field.description}\n                      </div>\n                    </div>\n                  )}\n                </label>\n                {hasError && (\n                  <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                    <AlertTriangle className=\"h-3 w-3\" />\n                    {fieldError}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return (\n          <div key={field.name} className=\"form-group\">\n            <label className=\"form-label flex items-center gap-2\">\n              <span className=\"flex items-center gap-1\">\n                {getFieldIcon(field.name)}\n                {field.label}\n                {field.required && <span className=\"text-red-500 ml-1\">*</span>}\n              </span>\n              {field.description && (\n                <div className=\"relative group\">\n                  <HelpCircle className=\"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help\" />\n                  <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10\">\n                    {field.description}\n                  </div>\n                </div>\n              )}\n            </label>\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={value}\n                onChange={(e) => handleInputChange(field.name, e.target.value)}\n                required={field.required}\n                className={`input ${hasError ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-blue-500 focus:ring-blue-500'} transition-colors duration-200`}\n                placeholder={`Enter ${field.label.toLowerCase()}`}\n              />\n              {hasError && (\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                  <AlertTriangle className=\"h-4 w-4 text-red-500\" />\n                </div>\n              )}\n            </div>\n            {hasError && (\n              <p className=\"text-sm text-red-600 mt-1 flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3\" />\n                {fieldError}\n              </p>\n            )}\n          </div>\n        );\n    }\n  };\n\n  if (isLoadingFields) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-300\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400 mx-auto mb-4\"></div>\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Loading Predictor...</h2>\n          <p className=\"text-gray-600 dark:text-gray-300\">Fetching field definitions from server</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!predictor) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Predictor Not Found</h2>\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6\">The requested predictor could not be found.</p>\n          <Link to=\"/predictors\" className=\"btn-primary\">\n            Back to Predictors\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const Icon = predictor.icon;\n\n  return (\n    <div className=\"min-h-screen py-8\">\n      <style>{`\n        .slider::-webkit-slider-thumb {\n          appearance: none;\n          height: 20px;\n          width: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          cursor: pointer;\n          border: 2px solid #ffffff;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n        }\n        .slider::-moz-range-thumb {\n          height: 20px;\n          width: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          cursor: pointer;\n          border: 2px solid #ffffff;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n        }\n        .slider:focus::-webkit-slider-thumb {\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\n        }\n        .slider:focus::-moz-range-thumb {\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\n        }\n      `}</style>\n      <div className=\"container-max section-padding\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"mb-8\"\n        >\n          <Link\n            to=\"/predictors\"\n            className=\"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-6 transition-colors duration-200\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Predictors\n          </Link>\n          \n          <div className=\"flex items-start space-x-6\">\n            <div className=\"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center\">\n              <Icon className=\"h-8 w-8 text-primary-600 dark:text-primary-400\" />\n            </div>\n            <div className=\"flex-1\">\n              <h1 className=\"text-3xl lg:text-4xl font-display font-bold text-gray-900 dark:text-white mb-2\">\n                {predictor.name}\n              </h1>\n              <p className=\"text-lg text-gray-600 dark:text-gray-300 mb-4\">{predictor.description}</p>\n              <div className=\"flex items-center space-x-6 text-sm\">\n                <div className=\"flex items-center text-gray-500 dark:text-gray-400\">\n                  <Clock className=\"h-4 w-4 mr-1\" />\n                  {predictor.estimatedTime}\n                </div>\n                <div className=\"text-green-600 dark:text-green-400 font-medium\">\n                  {predictor.accuracy} accuracy\n                </div>\n                <span className=\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full text-xs font-medium\">\n                  {predictor.difficulty}\n                </span>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n\n        {currentStep === 0 ? (\n          /* Form Step */\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8, delay: 0.2 }}\n          >\n            <div className=\"card max-w-4xl mx-auto\">\n              {/* Form Header */}\n              <div className=\"mb-8\">\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Health Assessment Form</h2>\n                <p className=\"text-gray-600 dark:text-gray-300\">\n                  Please review and adjust the pre-filled values below to get your personalized health assessment.\n                </p>\n              </div>\n              \n              {error && (\n                <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6\">\n                  <div className=\"flex items-center\">\n                    <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400 mr-2\" />\n                    <span className=\"text-red-800 dark:text-red-300\">{error}</span>\n                  </div>\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"space-y-8\">\n                {/* Single Inputs Section */}\n                <div className=\"space-y-8\">\n                  {/* Inputs Section */}\n                  <div className=\"pb-6\">\n                    <div className=\"flex items-center gap-2 mb-4\">\n                      <FileText className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Inputs</h3>\n                    </div>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6\">\n                      {predictor?.fields?.map(renderField)}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Form Actions */}\n                <div className=\"flex flex-col sm:flex-row items-center justify-between pt-8 border-t border-gray-200 dark:border-gray-700\">\n                  <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-0\">\n                    <CheckCircle className=\"h-4 w-4 mr-2 text-green-500\" />\n                    <span>Ready for assessment</span>\n                  </div>\n                  \n                  <button\n                    type=\"submit\"\n                    disabled={isLoading || formProgress < 100 || Object.values(fieldErrors).some(error => error)}\n                    className=\"btn-primary px-8 py-3 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[160px] justify-center transition-all duration-200 hover:shadow-lg\"\n                  >\n                    {isLoading ? (\n                      <>\n                        <Loader className=\"animate-spin h-5 w-5\" />\n                        <span>Analyzing...</span>\n                      </>\n                    ) : (\n                      <>\n                        <TrendingUp className=\"h-5 w-5\" />\n                        <span>Get Prediction</span>\n                      </>\n                    )}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        ) : (\n          /* Results Step */\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8 }}\n          >\n            {result && (\n              <div className=\"max-w-4xl mx-auto space-y-6\">\n                {/* Risk Assessment */}\n                <div className=\"card\">\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Risk Assessment</h2>\n                    <div className=\"flex space-x-2\">\n                      <button \n                        onClick={handleDownloadPDF}\n                        disabled={isDownloadingPDF}\n                        className=\"btn-outline p-2 relative\"\n                        title=\"Download PDF Report\"\n                      >\n                        {isDownloadingPDF ? (\n                          <div className=\"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full\" />\n                        ) : (\n                          <Download className=\"h-4 w-4\" />\n                        )}\n                      </button>\n                      <button className=\"btn-outline p-2\" title=\"Share Report\">\n                        <Share2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                    <div className=\"text-center\">\n                      <div className={`inline-flex items-center px-4 py-2 rounded-full text-lg font-semibold ${getRiskColor(result.risk_level)}`}>\n                        {React.createElement(getRiskIcon(result.risk_level), { className: 'h-5 w-5 mr-2' })}\n                        {result.risk_level} Risk\n                      </div>\n                      <p className=\"text-sm text-gray-500 mt-2\">Risk Level</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n                        {Math.round(result.risk_score * 100)}%\n                      </div>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">Risk Score</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n                        {Math.round(result.confidence * 100)}%\n                      </div>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">Confidence</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Explanation</h3>\n                    <p className=\"text-gray-700 dark:text-gray-300\">{result.explanation}</p>\n                  </div>\n                </div>\n\n                {/* Input Values Explanation */}\n                <div className=\"card\">\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\n                    <FileText className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                    Input Values Used in Prediction\n                  </h3>\n                  <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6\">\n                    <p className=\"text-gray-700 dark:text-gray-300 mb-4\">\n                      This prediction was generated using the following input values. These values represent your health profile and are used by our AI model to assess risk factors and generate personalized recommendations.\n                    </p>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                      {Object.entries(formData).filter(([key, value]) => value !== '' && value !== null && value !== undefined).map(([key, value]) => {\n                        const field = predictor?.fields?.find(f => f.name === key);\n                        const displayName = field?.label || key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n                        const unit = field?.unit || '';\n                        \n                        return (\n                          <div key={key} className=\"bg-white dark:bg-gray-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <h4 className=\"font-semibold text-gray-900 dark:text-white text-sm\">{displayName}</h4>\n                              {field?.required && (\n                                <span className=\"text-xs bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200 px-2 py-1 rounded-full\">\n                                  Required\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">\n                                {typeof value === 'boolean' ? (value ? 'Yes' : 'No') : value}\n                              </span>\n                              {unit && <span className=\"text-sm text-gray-500 dark:text-gray-400\">{unit}</span>}\n                            </div>\n                            {field?.description && (\n                              <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-2\">{field.description}</p>\n                            )}\n                          </div>\n                        );\n                      })}\n                    </div>\n                    <div className=\"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2\">\n                        <Info className=\"h-4 w-4\" />\n                        How These Values Impact Your Prediction\n                      </h4>\n                      <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                        Our AI model analyzes these input values using advanced machine learning algorithms trained on medical data. \n                        Each value contributes to the overall risk assessment, with some factors having higher impact than others. \n                        The model considers interactions between different health parameters to provide a comprehensive prediction.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Risk Factors */}\n                {result.risk_factors?.length > 0 && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Key Risk Factors</h3>\n                    <div className=\"space-y-2\">\n                      {result.risk_factors.map((factor, index) => (\n                        <div key={index} className=\"flex items-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg\">\n                          <AlertTriangle className=\"h-5 w-5 text-orange-600 dark:text-orange-400 mr-3\" />\n                          <span className=\"text-orange-800 dark:text-orange-300\">{factor}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Recommendations */}\n                {result.recommendations?.length > 0 && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Recommendations</h3>\n                    <div className=\"space-y-3\">\n                      {result.recommendations.map((recommendation, index) => (\n                        <div key={index} className=\"flex items-start p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n                          <CheckCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5\" />\n                          <span className=\"text-blue-800 dark:text-blue-300\">{recommendation}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Contributing Factors */}\n                {result.detailed_analysis?.contributing_factors && result.detailed_analysis.contributing_factors.length > 0 && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Contributing Factors</h3>\n                    <div className=\"space-y-2\">\n                      {result.detailed_analysis.contributing_factors.map((factor, index) => (\n                        <div key={index} className=\"flex items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg\">\n                          <TrendingUp className=\"h-5 w-5 text-purple-600 dark:text-purple-400 mr-3\" />\n                          <span className=\"text-purple-800 dark:text-purple-300\">{factor}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Health Metrics */}\n                {result.detailed_analysis?.health_metrics && result.detailed_analysis.health_metrics.length > 0 && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Health Metrics Analysis</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {result.detailed_analysis.health_metrics.map((metric, index) => (\n                        <div key={index} className=\"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <h4 className=\"font-semibold text-green-900 dark:text-green-100\">{metric.category}</h4>\n                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                              metric.status === 'Normal' ? 'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100' :\n                              metric.status === 'Warning' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100' :\n                              'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'\n                            }`}>\n                              {metric.status}\n                            </span>\n                          </div>\n                          <p className=\"text-green-700 dark:text-green-300 mb-2\">{metric.value}</p>\n                          {metric.recommendation && (\n                            <p className=\"text-sm text-green-600 dark:text-green-400\">{metric.recommendation}</p>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Risk Score Visualization */}\n                {result.risk_score !== undefined && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\n                      <BarChart3 className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      Risk Assessment Overview\n                    </h3>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                      {/* Risk Score Display */}\n                      <div className=\"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6\">\n                        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center\">Overall Risk Level</h4>\n                        <div className=\"flex flex-col items-center justify-center py-8\">\n                          {/* Circular Progress Chart */}\n                          <div className=\"relative w-40 h-40 mb-6\">\n                            <svg className=\"w-40 h-40 transform -rotate-90\" viewBox=\"0 0 144 144\">\n                              {/* Background circle */}\n                              <circle\n                                cx=\"72\"\n                                cy=\"72\"\n                                r=\"60\"\n                                stroke=\"currentColor\"\n                                strokeWidth=\"8\"\n                                fill=\"none\"\n                                className=\"text-gray-200 dark:text-gray-700\"\n                              />\n                              {/* Progress circle */}\n                              <circle\n                                cx=\"72\"\n                                cy=\"72\"\n                                r=\"60\"\n                                stroke=\"currentColor\"\n                                strokeWidth=\"8\"\n                                fill=\"none\"\n                                strokeDasharray={`${2 * Math.PI * 60}`}\n                                strokeDashoffset={`${2 * Math.PI * 60 * (1 - result.risk_score)}`}\n                                className={`transition-all duration-1000 ease-out ${\n                                  result.risk_score < 0.3 ? 'text-green-500' :\n                                  result.risk_score < 0.7 ? 'text-yellow-500' :\n                                  'text-red-500'\n                                }`}\n                                strokeLinecap=\"round\"\n                              />\n                            </svg>\n                            {/* Center content */}\n                            <div className=\"absolute inset-0 flex items-center justify-center\">\n                              <div className=\"text-center\">\n                                <div className={`text-3xl font-bold ${\n                                  result.risk_score < 0.3 ? 'text-green-600 dark:text-green-400' :\n                                  result.risk_score < 0.7 ? 'text-yellow-600 dark:text-yellow-400' :\n                                  'text-red-600 dark:text-red-400'\n                                }`}>\n                                  {Math.round(result.risk_score * 100)}%\n                                </div>\n                                <div className=\"text-xs text-gray-600 dark:text-gray-400 font-medium\">Risk Score</div>\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <span className={`inline-flex px-4 py-2 rounded-full text-sm font-medium ${\n                            result.risk_score < 0.3 ? 'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100' :\n                            result.risk_score < 0.7 ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100' :\n                            'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'\n                          }`}>\n                            {result.risk_score < 0.3 ? 'Low Risk' : result.risk_score < 0.7 ? 'Moderate Risk' : 'High Risk'}\n                          </span>\n                          \n                          {/* Risk Level Description */}\n                          <p className=\"text-center text-sm text-gray-600 dark:text-gray-400 mt-3 max-w-xs\">\n                            {result.risk_score < 0.3 \n                              ? 'Your risk level is low. Continue maintaining healthy habits.' \n                              : result.risk_score < 0.7 \n                              ? 'Your risk level is moderate. Consider lifestyle improvements.' \n                              : 'Your risk level is high. Consult with healthcare professionals.'}\n                          </p>\n                        </div>\n                      </div>\n\n                      {/* Risk Factors Breakdown */}\n                      {result.detailed_analysis?.contributing_factors && (\n                        <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6\">\n                          <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Key Contributing Factors</h4>\n                          <div className=\"space-y-4\">\n                            {result.detailed_analysis.contributing_factors.slice(0, 5).map((factor, index) => {\n                              // Assign different impact levels for visual variety\n                              const impactLevels = [85, 70, 60, 45, 30];\n                              const impactLevel = impactLevels[index] || 50;\n                              const colors = ['bg-red-500', 'bg-orange-500', 'bg-yellow-500', 'bg-blue-500', 'bg-green-500'];\n                              const bgColors = ['bg-red-50 dark:bg-red-900/20', 'bg-orange-50 dark:bg-orange-900/20', 'bg-yellow-50 dark:bg-yellow-900/20', 'bg-blue-50 dark:bg-blue-900/20', 'bg-green-50 dark:bg-green-900/20'];\n                              \n                              return (\n                                <div key={index} className={`p-4 ${bgColors[index]} rounded-lg border border-opacity-20`}>\n                                  <div className=\"flex items-center justify-between mb-2\">\n                                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{factor}</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">{impactLevel}%</span>\n                                  </div>\n                                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n                                    <div \n                                      className={`h-2 rounded-full ${colors[index]} transition-all duration-1000 ease-out`}\n                                      style={{ width: `${impactLevel}%` }}\n                                    ></div>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                          </div>\n                          \n                          {/* Factor Impact Summary */}\n                          <div className=\"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg\">\n                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-3\">Impact Distribution</h5>\n                            <div className=\"flex items-center gap-4 text-xs\">\n                              <div className=\"flex items-center gap-1\">\n                                <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\n                                <span className=\"text-gray-600 dark:text-gray-400\">High Impact</span>\n                              </div>\n                              <div className=\"flex items-center gap-1\">\n                                <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n                                <span className=\"text-gray-600 dark:text-gray-400\">Moderate Impact</span>\n                              </div>\n                              <div className=\"flex items-center gap-1\">\n                                <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                                <span className=\"text-gray-600 dark:text-gray-400\">Low Impact</span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* Lifestyle Impact */}\n                {result.detailed_analysis?.lifestyle_impact && Object.keys(result.detailed_analysis.lifestyle_impact).length > 0 && (\n                  <div className=\"card\">\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\n                      <Activity className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                      Lifestyle Impact Analysis\n                    </h3>\n                    \n                    {/* Lifestyle Impact Summary Chart */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n                      {/* Impact Overview Chart */}\n                      <div className=\"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6\">\n                        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Lifestyle Impact Overview</h4>\n                        <div className=\"space-y-4\">\n                          {(() => {\n                            // Filter and process lifestyle factors to show only meaningful ones\n                            const meaningfulFactors = Object.entries(result.detailed_analysis.lifestyle_impact)\n                              .filter(([key, value]) => {\n                                return key !== 'recommendations' && \n                                       value && \n                                       typeof value === 'string' && \n                                       (value as string).length > 5 && // Filter out single letters\n                                       !key.match(/^\\d+$/); // Filter out numeric keys\n                              })\n                              .slice(0, 5); // Limit to top 5 factors\n                            \n                            if (meaningfulFactors.length === 0) {\n                              return (\n                                <div className=\"text-center py-8\">\n                                  <div className=\"text-gray-500 dark:text-gray-400\">No specific lifestyle factors identified</div>\n                                </div>\n                              );\n                            }\n                            \n                            return meaningfulFactors.map(([key, value], index) => {\n                              // Determine impact level from content\n                              let impactLevel = 'Medium';\n                              let impactScore = 60;\n                              \n                              if (typeof value === 'string') {\n                                const lowerValue = (value as string).toLowerCase();\n                                if (lowerValue.includes('low') || lowerValue.includes('minimal') || lowerValue.includes('good')) {\n                                  impactLevel = 'Low';\n                                  impactScore = 25;\n                                } else if (lowerValue.includes('high') || lowerValue.includes('significant') || lowerValue.includes('severe') || lowerValue.includes('poor')) {\n                                  impactLevel = 'High';\n                                  impactScore = 85;\n                                }\n                              }\n                              \n                              const getIcon = (factorKey: string) => {\n                                const lowerKey = factorKey.toLowerCase();\n                                if (lowerKey.includes('smoking') || lowerKey.includes('tobacco')) return 'ð­';\n                                if (lowerKey.includes('diet') || lowerKey.includes('nutrition') || lowerKey.includes('food')) return 'ð¥';\n                                if (lowerKey.includes('exercise') || lowerKey.includes('activity') || lowerKey.includes('physical')) return 'ð';\n                                if (lowerKey.includes('sleep')) return 'ð´';\n                                if (lowerKey.includes('stress') || lowerKey.includes('mental')) return 'ð°';\n                                if (lowerKey.includes('alcohol') || lowerKey.includes('drink')) return 'ð·';\n                                if (lowerKey.includes('weight') || lowerKey.includes('bmi') || lowerKey.includes('obesity')) return 'âï¸';\n                                if (lowerKey.includes('blood') || lowerKey.includes('pressure')) return 'ð©¸';\n                                return 'ð';\n                              };\n                              \n                              return (\n                                <div key={index} className=\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg\">\n                                  <div className=\"flex items-center gap-3 flex-1\">\n                                    <span className=\"text-xl\">{getIcon(key)}</span>\n                                    <div className=\"flex-1\">\n                                      <h5 className=\"font-medium text-gray-900 dark:text-white text-sm\">\n                                        {key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                                      </h5>\n                                      <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1\">\n                                        <div \n                                          className={`h-2 rounded-full transition-all duration-500 ${\n                                            impactLevel === 'Low' ? 'bg-green-500' :\n                                            impactLevel === 'Medium' ? 'bg-yellow-500' : 'bg-red-500'\n                                          }`}\n                                          style={{ width: `${impactScore}%` }}\n                                        ></div>\n                                      </div>\n                                    </div>\n                                  </div>\n                                  <span className={`px-2 py-1 rounded-full text-xs font-medium ml-3 ${\n                                    impactLevel === 'Low' ? 'bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-200' :\n                                    impactLevel === 'Medium' ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-800 dark:text-yellow-200' :\n                                    'bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-200'\n                                  }`}>\n                                    {impactLevel}\n                                  </span>\n                                </div>\n                              );\n                            });\n                          })()\n                          }\n                        </div>\n                      </div>\n                      \n                      {/* Risk Distribution Visualization */}\n                      <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6\">\n                        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Risk Distribution</h4>\n                        <div className=\"space-y-4\">\n                          {(() => {\n                            // Create a simple risk distribution visualization\n                            const riskCategories = [\n                              { name: 'Low Risk Factors', value: 30, color: 'bg-green-500', count: 2 },\n                              { name: 'Moderate Risk Factors', value: 45, color: 'bg-yellow-500', count: 3 },\n                              { name: 'High Risk Factors', value: 25, color: 'bg-red-500', count: 1 }\n                            ];\n                            \n                            return riskCategories.map((category, index) => (\n                              <div key={index} className=\"space-y-2\">\n                                <div className=\"flex justify-between items-center\">\n                                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{category.name}</span>\n                                  <span className=\"text-sm text-gray-600 dark:text-gray-400\">{category.count} factors</span>\n                                </div>\n                                <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n                                  <div \n                                    className={`h-3 rounded-full ${category.color} transition-all duration-700`}\n                                    style={{ width: `${category.value}%` }}\n                                  ></div>\n                                </div>\n                                <div className=\"text-right\">\n                                  <span className=\"text-xs text-gray-500 dark:text-gray-400\">{category.value}%</span>\n                                </div>\n                              </div>\n                            ));\n                          })()\n                          }\n                        </div>\n                      </div>\n                    </div>\n                      \n                    {/* Key Recommendations */}\n                    <div className=\"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-6 border border-emerald-200 dark:border-emerald-700\">\n                      <h4 className=\"font-semibold text-emerald-900 dark:text-emerald-100 mb-4 flex items-center gap-2\">\n                        <CheckCircle className=\"h-5 w-5\" />\n                        Key Health Recommendations\n                      </h4>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {(() => {\n                          // Generate relevant recommendations based on predictor type\n                          const baseRecommendations = [\n                            \"Maintain a balanced diet rich in fruits and vegetables\",\n                            \"Engage in regular physical activity (150 minutes per week)\",\n                            \"Get adequate sleep (7-9 hours per night)\",\n                            \"Manage stress through relaxation techniques\"\n                          ];\n                          \n                          // Use actual recommendations if available, otherwise use base ones\n                          const recommendations = result.detailed_analysis.lifestyle_impact && Array.isArray(result.detailed_analysis.lifestyle_impact) && result.detailed_analysis.lifestyle_impact.length > 0\n                            ? result.detailed_analysis.lifestyle_impact.slice(0, 4).map(item => item.description || item.factor)\n                            : baseRecommendations;\n                          \n                          return recommendations.map((recommendation, recIndex) => (\n                            <div key={recIndex} className=\"flex items-start gap-3 p-4 bg-white dark:bg-gray-800 rounded-lg border border-emerald-100 dark:border-emerald-800 hover:shadow-md transition-all duration-200\">\n                              <div className=\"w-6 h-6 bg-emerald-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5 flex-shrink-0\">\n                                {recIndex + 1}\n                              </div>\n                              <span className=\"text-sm text-emerald-700 dark:text-emerald-300 leading-relaxed\">{recommendation}</span>\n                            </div>\n                          ));\n                        })()\n                        }\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex justify-center space-x-4\">\n                  <button\n                    onClick={() => {\n                      setCurrentStep(0);\n                      setResult(null);\n                      setError(null);\n                    }}\n                    className=\"btn-outline\"\n                  >\n                    New Assessment\n                  </button>\n                  <Link to=\"/predictors\" className=\"btn-primary\">\n                    Try Another Predictor\n                  </Link>\n                </div>\n              </div>\n            )}\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PredictorDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}